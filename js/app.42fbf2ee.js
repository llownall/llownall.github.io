(function(t){function e(e){for(var a,i,r=e[0],l=e[1],c=e[2],d=0,f=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={app:0},s=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0f32":function(t,e,n){},"3bac":function(t,e,n){"use strict";var a=n("0f32"),o=n.n(a);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{padding:"5rem 2rem"},attrs:{id:"app"}},[n("wysiwyg-math",{attrs:{id:"questionText",placeholder:"Нажмите здесь, чтобы ввести вопрос"}})],1)},s=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.showPopup,expression:"showPopup"}],staticClass:"popup"},[n("span",{staticClass:"border-right"},t._l(t.fontStyles,(function(e,a){return n("button",{key:a,class:{selected:e.selected},on:{click:function(n){return t.setStyle(e.style,!1,null,!0)}}},[n("i",{class:e.icon})])})),0),n("span",{staticClass:"border-right"},[n("button",{on:{click:function(e){return t.setStyle("justifyLeft")}}},[n("i",{staticClass:"fas fa-align-left"})]),n("button",{on:{click:function(e){return t.setStyle("justifyCenter")}}},[n("i",{staticClass:"fas fa-align-center"})]),n("button",{on:{click:function(e){return t.setStyle("justifyRight")}}},[n("i",{staticClass:"fas fa-align-right"})]),n("button",{on:{click:function(e){return t.setStyle("justifyFull")}}},[n("i",{staticClass:"fas fa-align-justify"})])]),n("span",{staticClass:"border-right"},[n("button",{on:{click:function(e){return t.setStyle("insertUnorderedList")}}},[n("i",{staticClass:"fas fa-list-ul"})]),n("button",{on:{click:function(e){return t.setStyle("insertOrderedList")}}},[n("i",{staticClass:"fas fa-list-ol"})])]),n("span",{staticClass:"border-right"},[n("button",{on:{click:function(e){return t.setStyle("formatBlock",!1,"h4")}}},[n("i",{staticClass:"fas fa-heading"})])]),n("span",{staticClass:"border-right"},[n("button",{on:{click:t.decreaseFont}},[t._v("smaller")]),n("button",{on:{click:t.increaseFont}},[t._v("bigger")])]),n("span",{staticClass:"border-right"},[n("button",{staticClass:"btn-md",on:{click:t.createFormula}},[t._v(" math ")])]),n("span",{},[n("button",{on:{click:function(e){return t.setStyle("undo")}}},[n("i",{staticClass:"fas fa-undo-alt"})])])])]),n("div",{ref:"textarea",staticClass:"form-control editor",style:"height: calc(1.5em * "+t.rows+" + .75rem + 2px); display: inline-block",attrs:{id:t.id,placeholder:t.placeholder,contenteditable:""},on:{focusin:function(e){t.showPopup=!0},focusout:t.hideSelf,input:t.onInput,change:t.onInput,click:t.updateCursorPos,keydown:t.updateCursorPos}}),n("div",[t._v(" cursorPos "),n("div",[t._v(" "+t._s(t.cursorPos)+" ")])]),n("br"),n("div",[t._v(" dataRaw "),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data,expression:"data"}],attrs:{cols:"100",rows:"10"},domProps:{value:t.data},on:{input:function(e){e.target.composing||(t.data=e.target.value)}}})])]),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title"},[t._v(t._s(t.isInEditMode?"Редактировать Формулу":"Вставить Формулу"))]),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){t.showModal=!1}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"d-flex"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formula,expression:"formula"}],staticStyle:{width:"100%"},attrs:{rows:"3"},domProps:{value:t.formula},on:{click:t.updateFormulaCursorPos,keydown:t.updateFormulaCursorPos,input:function(e){e.target.composing||(t.formula=e.target.value)}}}),n("div",{staticClass:"ml-2"},[n("div",{staticStyle:{position:"relative"}},[n("div",{staticClass:"py-1 px-2 text-center",staticStyle:{"background-color":"#ffffff",position:"relative",cursor:"pointer","user-select":"none",border:"rgb(133, 133, 133) solid 1px","border-radius":"4px"},on:{click:function(e){t.showLetters=!t.showLetters}}},[t._v(" \\(\\alpha \\beta \\gamma\\) ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showLetters,expression:"showLetters"}],staticClass:"py-1 px-1",staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"0",left:"100%","margin-left":"8px",border:"rgb(133, 133, 133) 1px solid","border-radius":"4px",display:"grid","grid-template-columns":"repeat(8, 1fr)","flex-wrap":"wrap","text-align":"center"}},t._l(t.letters,(function(e,a){return n("div",{key:a,staticStyle:{margin:"0 2px"},on:{click:function(n){return t.insertLetter(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)])])]),n("div",{staticStyle:{"font-weight":"bolder",margin:".8rem 0 .4rem"}},[t._v("Результат:")]),n("div",{ref:"formulaPreview",staticStyle:{margin:".5rem 0"}})]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("Отмена")]),t.isInEditMode?n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.saveFormula}},[t._v("Сохранить ")]):n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addFormula}},[t._v("Добавить в конец ")])])])])])])])],1)},r=[],l=(n("7db0"),n("4160"),n("caad"),n("c975"),n("d81d"),n("fb6a"),n("b0c0"),n("a9e3"),n("d3b7"),n("25f0"),n("159b"),{name:"wysiwygMath",props:{id:String,placeholder:String,rows:{type:Number,default:5}},data:function(){return{showPopup:!1,hideTimeout:null,formula:"",data:"",cursorPos:0,formulaCursorPos:0,fontStyles:[{tag:"b",icon:"fas fa-bold",style:"bold",selected:!1},{tag:"i",icon:"fas fa-italic",style:"italic",selected:!1},{tag:"u",icon:"fas fa-underline",style:"underline",selected:!1},{tag:"strike",icon:"fas fa-strikethrough",style:"strikethrough",selected:!1}],fontSizes:[{name:"x-small",value:"1"},{name:"small",value:"2"},{name:"medium",value:"3"},{name:"large",value:"4"},{name:"x-large",value:"5"},{name:"xx-large",value:"6"},{name:"xxx-large",value:"7"}],showModal:!1,isInEditMode:!1,showLetters:!1,showMathSymbols:!1,letters:["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\zeta","\\eta","\\theta","\\iota","\\kappa","\\lambda","\\mu","\\nu","\\pi","\\rho","\\sigma","\\tau","\\upsilon","\\phi","\\chi","\\psi","\\omega"]}},watch:{cursorPos:function(){this.analyze()},formula:function(){var t=this;this.$refs.formulaPreview.style.opacity=0,this.$refs.formulaPreview.innerHTML="\\(".concat(this.formula,"\\)"),setTimeout((function(){window.MathJax.typeset(),t.$refs.formulaPreview.style.opacity=1}),200)}},methods:{preventHide:function(){this.hideTimeout&&clearInterval(this.hideTimeout)},setStyle:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.preventHide(),document.execCommand(t,e,n),a){var o=this.fontStyles.find((function(e){return e.style===t}));o&&(o.selected=!0)}},hideSelf:function(){var t=this;this.hideTimeout=setTimeout((function(){t.showPopup=!1}),200)},createFormula:function(){var t=this;this.isInEditMode=!1,this.showModal=!0,setTimeout((function(){window.MathJax.typeset(),t.$refs.formulaPreview.style.opacity=1}),200)},onInput:function(t){this.$emit("input",t.target.innerHTML),this.data=t.target.innerHTML},getCursorPos:function(){var t=document.getSelection().getRangeAt(0),e=t.cloneRange();return e.selectNodeContents(this.$refs.textarea),e.setEnd(t.endContainer,t.endOffset),e.toString().length},updateCursorPos:function(){this.cursorPos=this.getCursorPos()},updateFormulaCursorPos:function(t){this.formulaCursorPos=t.target.selectionStart},insertLetter:function(t){this.formula=this.formula.slice(0,this.formulaCursorPos)+" ".concat(t," ")+this.formula.slice(this.formulaCursorPos)},analyze:function(){var t,e=window.getSelection(),n=[];if(e.rangeCount){t=e.getRangeAt(0).commonAncestorContainer;while(1){if(t=t.parentNode,null==t)break;var a=t.nodeName.toLowerCase();if(t===this.$refs.textarea)break;n.push(a)}}this.fontStyles.forEach((function(t){return t.selected=n.includes(t.tag)}))},increaseFont:function(){this.preventHide();var t=window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement;if(t!==this.$refs.textarea){if(""!==t.style.fontSize){var e=this.fontSizes.map((function(t){return t.name})).indexOf(t.style.fontSize);e<this.fontSizes.length-1&&(document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[e+1].value),document.execCommand("styleWithCSS",!1,!1))}}else document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[3].value),document.execCommand("styleWithCSS",!1,!1)},decreaseFont:function(){this.preventHide();var t=window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement;if(t!==this.$refs.textarea){if(""!==t.style.fontSize){var e=this.fontSizes.map((function(t){return t.name})).indexOf(t.style.fontSize);e>0&&(document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[e-1].value),document.execCommand("styleWithCSS",!1,!1))}}else document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[1].value),document.execCommand("styleWithCSS",!1,!1)},addFormula:function(){var t='<span contenteditable="false" class="math">'+this.$refs.formulaPreview.innerHTML+"</span><br>",e=this.$refs.textarea.innerHTML;this.$refs.textarea.innerHTML=e.substring(0,e.length-4)+t+"<br>",this.data+=t,setTimeout(window.MathJax.typeset,200),this.showModal=!1,this.formula=""},saveFormula:function(){},deleteFormula:function(){}},beforeCreate:function(){var t=document.createElement("script");t.setAttribute("src","https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"),document.head.appendChild(t)},beforeMount:function(){window.MathJax={options:{enableMenu:!1}}}}),c=l,u=(n("3bac"),n("2877")),d=Object(u["a"])(c,i,r,!1,null,null,null),f=d.exports,m={name:"App",components:{wysiwygMath:f}},p=m,h=Object(u["a"])(p,o,s,!1,null,null,null),v=h.exports,y=window.MathJax;a["a"].prototype.$mathjax=y,a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(v)}}).$mount("#app")}});
//# sourceMappingURL=app.42fbf2ee.js.map