(function(t){function e(e){for(var n,a,r=e[0],l=e[1],c=e[2],d=0,h=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,r=1;r<i.length;r++){var l=i[r];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={app:0},o=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0825":function(t,e,i){"use strict";i("96a3")},"1f38":function(t,e,i){},2342:function(t,e,i){},"2a50":function(t,e,i){},"2c58":function(t,e,i){"use strict";i("35d1")},"33c9":function(t,e,i){"use strict";i("9dc3")},3402:function(t,e,i){},"34a5":function(t,e,i){"use strict";i("fb74")},"34f9":function(t,e,i){"use strict";i("8356")},"35d1":function(t,e,i){},"3f68":function(t,e,i){},"40f1":function(t,e,i){},5108:function(t,e,i){},"54fe":function(t,e,i){"use strict";i("d045")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n,s,o,a,r=i("2b0e"),l=i("5f5b"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},u=[],d=(i("5c0b"),i("2877")),h={},f=Object(d["a"])(h,c,u,!1,null,null,null),m=f.exports,p=i("8c4f"),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slide_editor"},[i("header",[i("Heading")],1),i("main",[i("Sidebar",{attrs:{id:"sidebar"}}),t.isAnySlideSelected?i(t.activeSlideComponent,{tag:"component"}):t.slideIds.length>0?i("div",{staticClass:"help_text"},[t._v("Выберите слайд из списка ")]):i("div",{staticClass:"help_text"},[t._v("Чтобы начать редактирование, добавьте слайд ")])],1)])},g=[],b=i("5530"),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",{staticClass:"header border-bottom navbar navbar-expand-md navbar-light"},[t._m(0),i("div",{staticClass:"title"},[t._v(" "+t._s(t.$store.state.presentationInfo.name)+" "),i("a",{staticClass:"ml-1",staticStyle:{"font-size":"1.2em"},attrs:{href:"javascript:void(0);"}},[i("i",{staticClass:"fas fa-cog",on:{click:function(e){t.showModal=!0}}})])]),t._m(1),i("b-modal",{attrs:{title:"Параметры презентации","cancel-title":"Отмена","ok-title":"Сохранить"},on:{ok:function(e){return t.setPresentationInfo(t.presentationForm)}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[i("b-form-group",{attrs:{label:"Название:","label-class":"font-weight-bold"}},[i("b-form-input",{attrs:{placeholder:"Введите название презентации",required:""},model:{value:t.presentationForm.name,callback:function(e){t.$set(t.presentationForm,"name",e)},expression:"presentationForm.name"}})],1),i("b-form-group",{attrs:{label:"Описание:","label-class":"font-weight-bold"}},[i("b-form-input",{attrs:{placeholder:"Введите описание презентации",required:""},model:{value:t.presentationForm.description,callback:function(e){t.$set(t.presentationForm,"description",e)},expression:"presentationForm.description"}})],1),i("b-form-group",{attrs:{label:"Ключевые слова:","label-class":"font-weight-bold"}},[i("b-form-input",{attrs:{placeholder:"Введите ключевые слова"},model:{value:t.presentationForm.keywords,callback:function(e){t.$set(t.presentationForm,"keywords",e)},expression:"presentationForm.keywords"}})],1),i("b-form-group",{attrs:{label:"Язык:","label-class":"font-weight-bold"}},[i("b-form-select",{attrs:{options:t.languages,required:""},model:{value:t.presentationForm.language,callback:function(e){t.$set(t.presentationForm,"language",e)},expression:"presentationForm.language"}})],1)],1)],1)},y=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logo"},[i("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t._v("iAudience")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"controls"},[i("ul",{staticClass:"navbar-nav"},[i("div",[i("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("На главную")])]),i("div",{staticClass:"dropdown"},[i("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" Вася Пупкин ")]),i("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton1"}},[i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Профиль")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Настройки")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Выйти")])])])]),i("div",{staticClass:"dropdown"},[i("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" Помощь ")]),i("ul",{staticClass:"dropdown-menu dropdown-menu-end",attrs:{"aria-labelledby":"dropdownMenuLink"}},[i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Редактор тестов")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Справочный центр")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Быстрый старт")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Связаться с нами")])])])])])])}],S=i("2f62"),x="SET_PRESENTATION_INFO",_="ADD_SLIDE",C="SET_ACTIVE_SLIDE",E="INSERT_SLIDE",O="UPPER_SLIDE",I="LOWER_SLIDE",k="DELETE_SLIDE",M="SET_SLIDE_TYPE",$="SET_SLIDE_TIME",T="SET_SLIDE_PRICE",j="SET_SLIDE_HEIGHT",A="TOGGLE_GRID",z="TOGGLE_SCROLLBARS",F="ADD_SLIDE_ELEMENT",L="DELETE_SLIDE_ELEMENT",P="MOVE_SLIDE_ELEMENT",N="RESIZE_SLIDE_ELEMENT",D="SET_SLIDE_ELEMENT_VALUE",H="ADD_ANSWER_TO_ANSWERS_ELEMENT",R={name:"Heading",props:{},data:function(){return{showModal:!1,languages:[{text:"English [EN]",value:1},{text:"Русский [RU]",value:2}],presentationForm:{name:"",description:"",keywords:"",language:2}}},watch:{showModal:function(){this.showModal&&(this.presentationForm=JSON.parse(JSON.stringify(this.$store.state.presentationInfo)))}},methods:Object(b["a"])({},Object(S["d"])({setPresentationInfo:x}))},W=R,V=(i("5879"),Object(d["a"])(W,w,y,!1,null,"016cf160",null)),Y=V.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sidebar border-right"},[i("div",{ref:"slides",staticClass:"slides"},t._l(t.slideIds,(function(e,n){return i("div",{key:e,staticClass:"sidebar_item",class:{selected:t.isSlideSelected(e)},on:{click:function(i){return t.setActiveSlide(e)}}},[i("div",{staticClass:"actions_panel"},[i("div",[i("b",[t._v(t._s(n+1))])]),i("div",{staticStyle:{flex:"1 1 auto"}}),i("div",{staticClass:"actions"},[0!==n?i("div",{staticClass:"action",on:{click:function(i){return i.stopPropagation(),t.upperSlide(e)}}},[i("i",{staticClass:"fa fa-fw fa-sm fa-arrow-up"})]):t._e(),n!==t.slideIds.length-1?i("div",{staticClass:"action",on:{click:function(i){return i.stopPropagation(),t.lowerSlide(e)}}},[i("i",{staticClass:"fa fa-fw fa-sm fa-arrow-down"})]):t._e(),i("div",{staticClass:"action",on:{click:function(i){return i.stopPropagation(),t.duplicateSlide(e)}}},[i("i",{staticClass:"fa fa-fw fa-sm fa-clone"})]),i("div",{staticClass:"action",on:{click:function(i){return i.stopPropagation(),t.deleteSlide(e)}}},[i("i",{staticClass:"fa fa-fw fa-trash-o"})])])]),i("SlidePreview",{attrs:{"slide-id":e}})],1)})),0),i("div",{staticClass:"controls",class:{"border-top":t.hasScroll}},[i("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"button"},on:{click:t.addSlide}},[t._v("Добавить слайд ")])])])},U=[],X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"preview",staticClass:"preview",style:t.previewStyles},[t.ready&&t.slideTypeSet?i("RatioKeeper",{attrs:{ratio:t.ratio,"min-height":t.height,"fit-content":!0}},[i("div",{key:t.slideState,ref:"slide",staticClass:"slide"},t._l(t.slide.slideElements,(function(e){return i("SlideElement",t._b({key:e.id},"SlideElement",{element:e,editMode:t.editMode,slideWidth:t.slideWidth,slideHeight:t.slideHeight,cellSize:t.cellSize},!1))})),1)]):i("div",[t._v(t._s(t.slideId))])],1)},q=[],B=(i("7db0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"content_wrapper",staticClass:"content_wrapper",class:{entirely_visible:t.fitContent}},[i("div",{ref:"content",staticClass:"content",style:t.contentStyles},[t.ready?t._t("default"):t._e()],2)])}),J=[],K=i("1da1"),Z=(i("96cf"),i("a9e3"),i("99af"),{name:"RatioKeeper",props:{ratio:Number,minHeight:{type:Number,default:0},fitContent:{type:Boolean,default:!0}},data:function(){return{ready:!1,height:0,scale:1,offsetLeft:0,offsetTop:0,paddingX:20,paddingY:16,horizontalScrollPadding:20}},computed:{contentWidth:function(){return this.contentHeight*this.ratio+2*this.paddingX},contentHeight:function(){return this.height-2*this.paddingY},contentStyles:function(){return this.fitContent?{"min-width":this.contentWidth+"px",height:this.height+"px",padding:"".concat(this.paddingY,"px ").concat(this.paddingX,"px"),transform:"scale(".concat(this.scale,")")}:{width:this.contentWidth+"px",height:this.height+"px",padding:"".concat(this.paddingY,"px ").concat(this.paddingX,"px")}}},watch:{minHeight:function(){this.keepAspectRatio()},ratio:function(){this.keepAspectRatio()},fitContent:function(){this.keepAspectRatio()}},methods:Object(b["a"])(Object(b["a"])({},Object(S["d"])({toggleScrollbars:z})),{},{getBaseHeight:function(){var t=this.$refs.content_wrapper.clientHeight-this.horizontalScrollPadding;return t>this.minHeight?t:this.minHeight},getScale:function(){var t=this.$refs.content_wrapper.clientWidth/this.$refs.content.clientWidth,e=this.$refs.content_wrapper.clientHeight/this.$refs.content.clientHeight;return Math.min(t,e)},keepAspectRatio:function(){var t=this;return Object(K["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.ready=!1,t.height=t.getBaseHeight(),t.$nextTick((function(){t.fitContent?t.scale=t.getScale():t.scale=1,t.ready=!0,t.$emit("ready")}));case 3:case"end":return e.stop()}}),e)})))()}}),created:function(){var t=this,e=function(){return t.keepAspectRatio()};window.addEventListener("resize",e),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",e)}))},mounted:function(){this.keepAspectRatio()}}),Q=Z,tt=(i("33c9"),Object(d["a"])(Q,B,J,!1,null,"562c6b25",null)),et=tt.exports,it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"movable",staticClass:"movable",class:t.movableClasses,attrs:{tabindex:t.element.id},on:{"!click":function(e){return t.onClick(e)},dblclick:t.onDblClick,mouseover:function(e){t.isHovered=!0},mouseleave:t.onMouseLeave,focusin:t.onMovableFocusIn,focusout:t.onMovableFocusOut,keyup:t.onKeyUp}},[i("span",{staticClass:"popup",class:{hidden:t.areActionsHidden},on:{dblclick:function(t){t.stopPropagation()}}},[i("span",{staticClass:"d-flex"},[t._l(t.actions,(function(e,n){return i("button",{key:n,staticClass:"popup-button",class:{pressed:e.isPressed},attrs:{disabled:e.disabled},domProps:{innerHTML:t._s(e.html)},on:{click:e.func}})})),t.noDelete?t._e():i("button",{staticClass:"popup-button",on:{click:t.deleteSelf}},[i("i",{staticClass:"far fa-trash-alt"})])],2)]),!t.noResize&&t.isElementFocused?[i("div",{ref:"top",staticClass:"size_change top"}),i("div",{ref:"right",staticClass:"size_change right"}),i("div",{ref:"bottom",staticClass:"size_change bottom"}),i("div",{ref:"left",staticClass:"size_change left"}),i("div",{ref:"left_top",staticClass:"size_change left_top"}),i("div",{ref:"left_bottom",staticClass:"size_change left_bottom"}),i("div",{ref:"right_top",staticClass:"size_change right_top"}),i("div",{ref:"right_bottom",staticClass:"size_change right_bottom"})]:t._e(),i(t.element.content.component,{ref:"inner_component",tag:"component",staticClass:"inner_component",style:t.innerComponentStyles,attrs:{value:t.element.content.value,"edit-mode":t.editMode},on:{input:function(e){return t.setValue({id:t.element.id,value:e})},focusin:t.onInnerFocusIn,focusout:t.onInnerFocusOut,initialized:t.onInnerInitialized}})],2)},nt=[],st=i("3835"),ot=(i("159b"),i("4fad"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text_object"},[i("wysiwyg-math",{ref:"wysimath",attrs:{functions:t.$store.getters.defaultWysiwygMathConfiguration,html:t.value.html,"edit-mode":t.editMode},on:{input:function(e){return t.$emit("input",{html:e})},focusin:t.onFocusIn,focusout:t.onFocusOut}})],1)}),at=[],rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wysimath"},[t.editMode?i("span",{class:t.popupClasses,on:{mousedown:t.preventHide}},[t.textStylesEnabled?i("span",{staticClass:"border-right d-flex"},t._l(t.fontStyles,(function(e,n){return i("button",{key:n,staticClass:"popup-button",class:{selected:e.selected},on:{click:function(i){return t.setStyle(e.style,!1,null,!0)}}},[i("i",{class:e.icon})])})),0):t._e(),t.fontSizeEnabled?i("span",{staticClass:"border-right d-flex"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedFontSize,expression:"selectedFontSize"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedFontSize=e.target.multiple?i:i[0]},t.changeFontSize]}},t._l(t.newFontSizes,(function(e){return i("option",{key:e},[t._v(t._s(e))])})),0)]):t._e(),t.textAlignEnabled?i("span",{staticClass:"border-right d-flex"},t._l(t.textStyles,(function(e,n){return i("button",{key:n,staticClass:"popup-button",class:{selected:e.selected},on:{click:function(i){t.textAlign(e.style),e.selected=!e.selected}}},[i("i",{class:e.icon})])})),0):t._e(),t.listsEnabled?i("span",{staticClass:"border-right d-flex"},t._l(t.lists,(function(e,n){return i("button",{key:n,staticClass:"popup-button",class:{selected:e.selected},on:{click:function(i){return t.setStyle(e.style,!1,null)}}},[i("i",{class:e.icon})])})),0):t._e(),t.linksEnabled||t.codeEnabled||t.formulasEnabled?i("span",{staticClass:"border-right d-flex"},[t.linksEnabled?i("button",{staticClass:"popup-button",on:{click:t.insertLink}},[i("i",{staticClass:"fas fa-link"})]):t._e(),t.codeEnabled?i("button",{staticClass:"popup-button",on:{click:t.insertCode}},[i("i",{staticClass:"fas fa-code"})]):t._e(),t.formulasEnabled?i("button",{staticClass:"popup-button",on:{click:t.createFormula}},[i("i",{staticClass:"fas fa-square-root-alt"})]):t._e()]):t._e(),t.redoEnabled?i("span",[i("button",{staticClass:"popup-button",on:{click:function(e){return t.setStyle("undo")}}},[i("i",{staticClass:"fas fa-undo-alt"})])]):t._e()]):t._e(),t.isEmpty&&!t.isFocused?i("span",{staticClass:"form-control editor",staticStyle:{opacity:".6","font-size":"24pt"},on:{click:t.focus}},[t._v("Введите текст")]):t._e(),i("span",{ref:"textarea",staticClass:"form-control editor",attrs:{placeholder:t.placeholder,contenteditable:""},on:{focusin:t.onFocusIn,focusout:t.hideSelf,input:t.onDivInput,change:t.onDivInput,keyup:t.updateCursorPos}}),t.editMode?[i("formula-modal",{ref:"formulaAddModal",on:{"insert-latex":t.onInsertLaTeX,focusout:t.focus}}),i("formula-modal",{ref:"formulaEditModal",attrs:{"is-in-edit-mode":""},on:{"insert-latex":t.onModifyLaTeX,focusout:t.focus}}),i("link-modal",{ref:"linkAddModal",on:{"insert-link":t.onInsertLink,focusout:t.focus}}),i("code-modal",{ref:"codeAddModal",on:{"insert-code":t.onInsertCode,focusout:t.focus}})]:t._e()],2)},lt=[],ct=(i("caad"),i("2532"),i("a630"),i("3ca3"),i("d3b7"),i("25f0"),i("fb6a"),i("d81d"),i("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"formula",staticClass:"wysiwyg-math-formula",attrs:{contenteditable:"false","data-latex":t.latex},on:{dblclick:t.edit}})}),ut=[],dt={name:"mathFormula",props:["latex","onClick"],data:function(){return{show:!1}},methods:{edit:function(){this.onClick({element:this.$refs.formula,latex:this.latex})},render:function(){var t=this;this.show=!1,setTimeout((function(){window.katex.render("".concat(t.latex),t.$refs.formula,{throwOnError:!1,output:"html"}),t.$refs.formula.innerHTML=" "+t.$refs.formula.innerHTML+" ",t.show=!0}),100)}},mounted:function(){this.render()}},ht=dt,ft=(i("d189"),Object(d["a"])(ht,ct,ut,!1,null,null,null)),mt=ft.exports,pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{title:t.isInEditMode?"Редактировать формулу":"Вставить формулу"},scopedSlots:t._u([{key:"default",fn:function(){return[i("div",{ref:"patterns",staticClass:"d-flex mb-3"},[i("div",{staticClass:"d-flex"},[i("div",{staticStyle:{position:"relative"}},[i("div",{staticClass:"py-1 px-2 text-center section-button",class:{expanded:t.showLetters},attrs:{tabindex:"0"},on:{click:function(e){t.showLetters=!t.showLetters},focusout:t.hideSelf}},[t._v(" \\(\\alpha \\beta \\delta\\) ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLetters,expression:"showLetters"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 1px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(8, 1fr)","flex-wrap":"wrap","text-align":"center"},on:{mousedown:t.preventHide}},t._l(t.letters,(function(e,n){return i("div",{key:n,staticClass:"letter",on:{click:function(i){return t.insertLetter(e)}}},[t._v(" \\( "+t._s(e)+" \\) ")])})),0)]),i("div",{staticClass:"ml-2",staticStyle:{position:"relative"}},[i("div",{staticClass:"py-1 px-2 text-center section-button",class:{expanded:t.showOperators},attrs:{tabindex:"0"},on:{click:function(e){t.showOperators=!t.showOperators},focusout:t.hideSelf}},[t._v(" \\(\\sum\\) ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showOperators,expression:"showOperators"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 1px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(4, 1fr)","flex-wrap":"wrap","text-align":"center"},on:{mousedown:t.preventHide}},t._l(t.operators,(function(e,n){return i("div",{key:n,staticClass:"letter",on:{click:function(i){return t.insertOperator(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)]),i("div",{staticClass:"ml-2",staticStyle:{position:"relative"}},[i("div",{staticClass:"py-1 px-2 text-center section-button",class:{expanded:t.showSymbols},attrs:{tabindex:"0"},on:{click:function(e){t.showSymbols=!t.showSymbols},focusout:t.hideSelf}},[t._v(" \\(\\neq\\) ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSymbols,expression:"showSymbols"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 1px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(7, 1fr)","flex-wrap":"wrap","text-align":"center"},on:{mousedown:t.preventHide}},t._l(t.symbols,(function(e,n){return i("div",{key:n,staticClass:"letter",on:{click:function(i){return t.insertSymbol(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)])])]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formula,expression:"formula"}],ref:"formulaTextarea",staticStyle:{width:"100%"},attrs:{rows:"3",autofocus:""},domProps:{value:t.formula},on:{click:t.updateFormulaCursorPos,keydown:t.updateFormulaCursorPos,input:function(e){e.target.composing||(t.formula=e.target.value)}}}),i("div",{staticStyle:{"font-weight":"bolder",margin:".8rem 0 .4rem"}},[t._v("Результат:")]),i("div",{ref:"formulaPreview",staticStyle:{margin:".5rem 0",height:"40px"}})]},proxy:!0},{key:"modal-footer",fn:function(){return[i("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("Отмена")]),t.isInEditMode?i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.saveFormula}},[t._v("Сохранить ")]):i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addFormula}},[t._v("Добавить ")])]},proxy:!0}]),model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}})},vt=[],gt={name:"formulaModal",components:{mathFormula:mt},props:{isInEditMode:{type:Boolean,default:!1}},data:function(){return{showModal:!1,updateFormulaTimeout:null,formula:"",data:null,showLetters:!1,showOperators:!1,showSymbols:!1,preventHideFlag:!1,changeOpacity:!1,preventFormulaWatcher:!1,letters:["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\zeta","\\eta","\\theta","\\iota","\\kappa","\\lambda","\\mu","\\nu","\\omicron","\\pi","\\rho","\\sigma","\\tau","\\upsilon","\\phi","\\chi","\\psi","\\omega","\\Gamma","\\Delta","\\Theta","\\Lambda","\\Xi","\\Pi","\\Upsilon","\\Phi","\\Psi","\\Omega","\\Sigma","\\mathbb{N}","\\mathbb{Z}","\\mathbb{Q}","\\mathbb{R}","\\mathbb{C}"],operators:["\\sqrt{ab}","\\sqrt[n]{ab}","\\log_{a}{b}","\\lg{ab}","a^{b}","a_{b} c_a^b","c_a^b","\\widetilde{ab}","\\widehat{ab}","\\overrightarrow{ab}","\\overline{ab}","\\frac{ab}{cd}","\\frac{\\partial a}{\\partial b}","\\frac{\\text{d}x}{\\text{d}y}","\\lim_{a \\rightarrow b}","\\int_{a}^{b}","\\prod_a^b","\\bigcap_a^b","\\bigcup_a^b","\\sum_a^b","\\left(\\begin{array}{c}a\\\\ b\\end{array}\\right)","\\begin{bmatrix}a & b \\\\c & d \\end{bmatrix}","\\begin{cases}a & x = 0\\\\b & x > 0\\end{cases}"],symbols:["\\times","\\div","\\pm","\\mp","\\cdot","\\star","\\neq","\\leq","\\geq","\\sim","\\approx","\\cong","\\equiv","\\ll","\\gg","\\in","\\subset","\\subseteq","\\ni","\\models","\\vdash","\\perp","\\mid","\\parallel","\\hat{a}","\\check{a}","\\acute{a}","\\tilde{a}","\\bar{a}","\\vec{a}","\\dot{a}","\\ddot{a}","\\leftarrow","\\Leftarrow","\\rightarrow","\\Rightarrow","\\leftrightarrow","\\Leftrightarrow","\\exists","\\forall","\\triangle","\\triangledown"]}},watch:{formula:function(){var t=this;this.updateFormulaTimeout&&clearTimeout(this.updateFormulaTimeout),this.preventFormulaWatcher?this.preventFormulaWatcher=!1:this.updateFormulaTimeout=setTimeout((function(){window.katex.render("".concat(t.formula),t.$refs.formulaPreview,{throwOnError:!1,output:"html"}),t.changeOpacity&&(t.$refs.formulaPreview.style.opacity=1,t.changeOpacity=!1)}),1500)},showModal:function(){this.showModal?this.$nextTick((function(){return window.renderMathInElement(document.body)})):this.$emit("focusout")}},methods:{toggle:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.data=e,this.formula="",this.isInEditMode&&(this.preventFormulaWatcher=!0,this.formula=e.latex),this.showModal=!0,this.$nextTick((function(){t.isInEditMode?window.katex.render("".concat(t.formula),t.$refs.formulaPreview,{throwOnError:!1,output:"html"}):t.$refs.formulaPreview.innerHTML="",t.$refs.formulaTextarea.focus()}))},preventHide:function(){this.preventHideFlag=!0},hideSelf:function(){this.preventHideFlag?this.preventHideFlag=!this.preventHideFlag:(this.showLetters=!1,this.showOperators=!1,this.showSymbols=!1)},updateData:function(){this.data=this.$refs.textarea.innerHTML},updateFormulaCursorPos:function(t){var e=this;setTimeout((function(){e.formulaCursorPos=t.target.selectionStart}),100)},insertToFormula:function(t){void 0!==this.formulaCursorPos?this.formula=this.formula.slice(0,this.formulaCursorPos)+" ".concat(t," ")+this.formula.slice(this.formulaCursorPos):this.formula+=" ".concat(t," ")},insertLetter:function(t){this.showLetters=!1,this.insertToFormula(t)},insertOperator:function(t){this.showOperators=!1,this.insertToFormula(t)},insertSymbol:function(t){this.showSymbols=!1,this.insertToFormula(t)},addFormula:function(){this.showModal=!1,this.$emit("insert-latex",this.formula)},saveFormula:function(){this.showModal=!1,this.data.latex=this.formula,this.$emit("insert-latex",this.data)}}},bt=gt,wt=(i("b6af"),Object(d["a"])(bt,pt,vt,!1,null,null,null)),yt=wt.exports,St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{title:"Вставить ссылку","cancel-title":"Отмена","ok-title":"Добавить"},on:{ok:t.addLink},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[i("b-form-group",{attrs:{label:"Ссылка:","label-class":"font-weight-bold"}},[i("b-form-input",{attrs:{type:"url",placeholder:"Введите ссылку на интернет-ресурс",required:""},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1),i("b-form-group",{attrs:{label:"Описание:","label-class":"font-weight-bold"}},[i("b-form-input",{attrs:{type:"text",placeholder:"Введите текст, который будет отображен",required:""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)],1)},xt=[],_t={name:"linkModal",props:{},data:function(){return{showModal:!1,url:"",text:""}},computed:{},watch:{showModal:function(){this.showModal||this.$emit("focusout")}},methods:{toggle:function(){this.url="",this.text="",this.showModal=!0},addLink:function(){this.showModal=!1,this.$emit("insert-link",this.url,this.text)}}},Ct=_t,Et=(i("f5a9"),Object(d["a"])(Ct,St,xt,!1,null,null,null)),Ot=Et.exports,It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{title:"Вставить программный код",size:"xl","cancel-title":"Отмена","ok-title":"Добавить"},on:{ok:t.addCode},scopedSlots:t._u([{key:"default",fn:function(){return[i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row",staticStyle:{"min-height":"30vh"}},[i("div",{staticClass:"col-lg-6 d-flex flex-column"},[i("label",{staticClass:"form-label",attrs:{for:"unformatted_code"}},[t._v("Неформатированный код")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"form-control flex-grow-1",staticStyle:{width:"100%"},attrs:{id:"unformatted_code"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),i("div",{staticClass:"col-lg-6 d-flex flex-column mt-lg-0",staticStyle:{"margin-top":"1rem"}},[i("label",{staticClass:"form-label"},[t._v("Форматированный код")]),i("pre",{ref:"preformatted",staticClass:"flex-grow-1"},[i("code",{ref:"formatted_code",class:t.languageClass})])])])])]},proxy:!0},{key:"modal-footer",fn:function(){return[i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.language,expression:"language"}],staticClass:"custom-select",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.language=e.target.multiple?i:i[0]}}},[i("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("Выберите язык")]),t._l(t.languages,(function(e){return i("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text)+" ")])}))],2)]),i("div",{staticClass:"flex-grow-1"}),i("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("Отмена")]),i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addCode}},[t._v("Добавить ")])]},proxy:!0}]),model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}})},kt=[],Mt={name:"codeModal",props:{},data:function(){return{showModal:!1,code:"",language:null,languages:[{text:"Markup",value:"markup"},{text:"XML",value:"xml"},{text:"HTML",value:"html"},{text:"CSS",value:"css"},{text:"C++",value:"clike"},{text:"JavaScript",value:"js"},{text:"Python",value:"python"}]}},computed:{languageClass:function(){var t=this;return null===this.language?"":(this.$nextTick((function(){return t.$nextTick(t.formatCode)})),"language-".concat(this.language))}},watch:{code:function(){var t=this;this.$nextTick((function(){t.$refs.formatted_code.textContent=t.code,t.formatCode()}))},showModal:function(){this.showModal?this.$nextTick(this.formatCode):this.$emit("focusout")}},methods:{toggle:function(){this.showModal=!0,this.code="",this.language=null},formatCode:function(){window.Prism.highlightElement(this.$refs.formatted_code)},addCode:function(){this.showModal=!1,this.$emit("insert-code",this.$refs.preformatted)}},mounted:function(){}},$t=Mt,Tt=(i("c899"),Object(d["a"])($t,It,kt,!1,null,"ef9ea744",null)),jt=Tt.exports,At={name:"wysiwygMath",components:{mathFormula:mt,formulaModal:yt,linkModal:Ot,codeModal:jt},props:{id:String,placeholder:String,imageUploadUrl:{type:String,default:null},functions:{type:Array,default:function(){return[]}},html:{type:String,default:""},editMode:{type:Boolean,default:!0}},data:function(){return{showPopup:!1,hideTimeout:null,preventHideFlag:!1,isEmpty:!0,isFocused:!1,selection:null,range:null,align:"left",fontStyles:[{tag:"b",icon:"fas fa-bold",style:"bold",selected:!1},{tag:"i",icon:"fas fa-italic",style:"italic",selected:!1},{tag:"u",icon:"fas fa-underline",style:"underline",selected:!1},{tag:"strike",icon:"fas fa-strikethrough",style:"strikethrough",selected:!1}],lists:[{tag:"ul",icon:"fas fa-list-ul",style:"insertUnorderedList",selected:!1},{tag:"ol",icon:"fas fa-list-ol",style:"insertOrderedList",selected:!1}],textStyles:[{tag:"left",icon:"fas fa-align-left",style:"left",selected:!1},{tag:"center",icon:"fas fa-align-center",style:"center",selected:!1},{tag:"right",icon:"fas fa-align-right",style:"right",selected:!1},{tag:"justify",icon:"fas fa-align-justify",style:"justify",selected:!1}],fontSizes:[{name:"x-small",value:"1"},{name:"small",value:"2"},{name:"medium",value:"3"},{name:"large",value:"4"},{name:"x-large",value:"5"},{name:"xx-large",value:"6"},{name:"xxx-large",value:"7"}],selectedFontSize:24,newFontSizes:[8,9,10,11,12,14,18,24,30,36,48,60,72,96],updateFormulaTimeout:null}},computed:{textStylesEnabled:function(){return this.functions.includes("textStyle")},fontSizeEnabled:function(){return this.functions.includes("fontSize")},textAlignEnabled:function(){return this.functions.includes("textAlign")},listsEnabled:function(){return this.functions.includes("lists")},linksEnabled:function(){return this.functions.includes("linkInsert")},codeEnabled:function(){return this.functions.includes("codeInsert")},formulasEnabled:function(){return this.functions.includes("formulaInsert")},redoEnabled:function(){return this.functions.includes("redo")},popupClasses:function(){return this.showPopup?"popup":"popup hidden"}},watch:{},methods:{focus:function(){this.isFocused=!0,this.$refs.textarea.focus()},preventHide:function(){this.preventHideFlag=!0},setStyle:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(document.execCommand(t,i,n),this.$refs.textarea.focus(),s){var o=this.fontStyles.find((function(e){return e.style===t}));o&&(o.selected=!o.selected)}else setTimeout((function(){e.analyze()}),100)},resetChildStyle:function(t,e){var i=this;t instanceof HTMLElement&&Array.from(t.children).forEach((function(t){t.style[e]=null,i.resetChildStyle(t,e)}))},isEditor:function(t){return void 0!==t.classList&&Array.from(t.classList).includes("editor")},textAlign:function(t){var e=this,i=this.selection.getRangeAt(0).commonAncestorContainer;if(this.resetChildStyle(i,"textAlign"),this.isEditor(i)){var n=this.range.extractContents(),s=document.createElement("p");s.style.textAlign=t,s.appendChild(n),this.range.insertNode(s)}else{while("p"!==i.nodeName.toLowerCase())i=i.parentNode;i.style.textAlign=t}this.$refs.textarea.focus(),setTimeout((function(){e.analyze()}),100),this.$refs.textarea.dispatchEvent(new Event("input",{bubbles:!0}))},onFocusIn:function(){this.showPopup=!0,this.isFocused=!0,this.$emit("focusin")},hideSelf:function(t){this.preventHideFlag?this.preventHideFlag=!this.preventHideFlag:(this.isFocused=!1,this.showPopup=!1,this.$emit("focusout"))},createFormula:function(){this.$refs.formulaAddModal.toggle()},insertLink:function(){this.$refs.linkAddModal.toggle()},insertCode:function(){this.$refs.codeAddModal.toggle()},isInnerEmpty:function(t,e){var i=/^(\n)*$/,n=/^<p><span class="wrapper" style="font-size: \d+pt;">﻿<\/span><\/p>$/;return i.test(t)||n.test(e)||""===t},onDivInput:function(t){this.isInnerEmpty(t.target.innerText,t.target.innerHTML)?(this.$refs.textarea.innerHTML='<p><span class="wrapper" style="font-size: '.concat(this.selectedFontSize,'pt;">&#65279;</span></p>'),this.isEmpty=!0,this.$emit("input",this.$refs.textarea.innerHTML)):(this.isEmpty=!1,this.$emit("input",this.$refs.textarea.innerHTML))},removeFontSizeRecursive:function(t){var e=this;void 0!==t.style&&t.removeAttribute("style"),Array.from(t.children).forEach((function(t){e.removeFontSizeRecursive(t)}))},removeEmptyWrappers:function(){this.$refs.textarea.querySelectorAll(".wrapper").forEach((function(t){""===t.textContent&&t.remove()}))},changeFontSize:function(){var t=this,e=this.selectedFontSize;if("\ufeff"===this.$refs.textarea.textContent)this.$refs.textarea.innerHTML='<p><span class="wrapper" style="font-size: '.concat(this.selectedFontSize,'pt;">&#65279;</span></p>');else{var i,n=this.range.extractContents(),s=!1,o=document.createElement("span"),a=n.cloneNode(!0);o.appendChild(a),void 0!==this.range.commonAncestorContainer.classList&&this.range.commonAncestorContainer.classList.contains("wrapper")&&this.range.commonAncestorContainer.textContent===o.textContent?i=this.range.commonAncestorContainer:(s=!0,i=document.createElement("span"),i.classList.add("wrapper")),i.style.fontSize=this.selectedFontSize.toString()+"pt",i.innerHTML="&#65279;",i.appendChild(n),Array.from(i.children).forEach((function(e){return t.removeFontSizeRecursive(e)})),o.remove(),this.removeEmptyWrappers(),s?this.range.insertNode(i):(this.range.selectNodeContents(i),this.selection.removeAllRanges(),this.selection.addRange(this.range))}this.range.collapse(!1),this.$nextTick((function(){t.$refs.textarea.focus(),t.selectedFontSize=e})),this.$refs.textarea.dispatchEvent(new Event("input",{bubbles:!0}))},getRenderedFormula:function(t){var e=this,i=r["default"].extend(mt),n=new i({propsData:{latex:t,onClick:function(t){return e.$refs.formulaEditModal.toggle(t)}}});return n.$mount(),n},onInsertLaTeX:function(t){var e=this.getRenderedFormula(t),i=document.createTextNode("\ufeff");this.range.insertNode(i),this.range.insertNode(e.$el),this.range.collapse(!1),this.selection.removeAllRanges(),this.selection.addRange(this.range),this.$refs.textarea.focus(),this.$refs.textarea.dispatchEvent(new Event("input",{bubbles:!0}))},onModifyLaTeX:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getRenderedFormula(t.latex);t.element.parentNode.insertBefore(i.$el,t.element),t.element.parentNode.removeChild(t.element),e||(this.selection.removeAllRanges(),this.selection.addRange(this.range),this.selection.collapseToEnd(),this.$refs.textarea.focus()),this.$refs.textarea.dispatchEvent(new Event("input",{bubbles:!0}))},onInsertLink:function(t,e){var i=document.createElement("a");i.appendChild(document.createTextNode(e)),i.href=t,i.target="blank",i.contentEditable=!1,this.range.insertNode(i),this.selection.removeAllRanges(),this.selection.addRange(this.range),this.selection.collapseToEnd(),this.$refs.textarea.focus(),this.$refs.textarea.dispatchEvent(new Event("input",{bubbles:!0}))},onInsertCode:function(t){var e=document.createElement("span");e.appendChild(t.cloneNode(!0)),e.contentEditable=!1,this.range.insertNode(e),this.selection.removeAllRanges(),this.selection.addRange(this.range),this.selection.collapseToEnd(),this.$refs.textarea.focus(),this.$refs.textarea.dispatchEvent(new Event("input",{bubbles:!0}))},rerenderFormulas:function(){var t=this;this.$refs.textarea.querySelectorAll(".wysiwyg-math-formula").forEach((function(e){t.onModifyLaTeX({element:e,latex:e.dataset.latex},!0)}))},updateCursorPos:function(t){var e=window.getSelection();this.$refs.textarea.contains(e.anchorNode)&&(this.selection=e,this.range=this.selection.getRangeAt(0),null!==t&&"type"in t&&"click"===t.type?setTimeout(this.analyze,100):this.analyze())},analyze:function(){var t,e=this.selection,i=[],n={};if(e.rangeCount){t=e.getRangeAt(0).commonAncestorContainer;while(1){if(null==t)break;var s=t.nodeName.toLowerCase();if(t===this.$refs.textarea)break;function o(t,e){try{return""!==t[e]?t[e]:null}catch(i){return null}}"textAlign"in n&&null!==n.textAlign||(n.textAlign=o(t.style,"textAlign")),"fontSize"in n&&null!==n.fontSize||(n.fontSize=o(t.style,"fontSize")),"fontWeight"in n&&null!==n.fontWeight||(n.fontWeight=o(t.style,"fontWeight")),i.push(s),t=t.parentNode}}if(![void 0,null].includes(n.fontSize)){var a=parseInt(n.fontSize.slice(0,-2)),r=n.fontSize.slice(-2);"px"===r&&(a*=3/4),this.selectedFontSize=a}this.lists.forEach((function(t){return t.selected=i.includes(t.tag)})),this.fontStyles.forEach((function(t){return t.selected=i.includes(t.tag)})),"bolder"===n.fontWeight&&(this.fontStyles[0].selected=!0);var l=!1;this.textStyles.forEach((function(t){t.selected=n.textAlign===t.tag,t.selected&&(l=!0)})),l||(this.textStyles[0].selected=!0)},increaseFont:function(){var t=window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement;if(t!==this.$refs.textarea){if(""!==t.style.fontSize){var e=this.fontSizes.map((function(t){return t.name})).indexOf(t.style.fontSize);e<this.fontSizes.length-1&&(document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[e+1].value),document.execCommand("styleWithCSS",!1,!1))}}else document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[3].value),document.execCommand("styleWithCSS",!1,!1)},decreaseFont:function(){var t=window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement;if(t!==this.$refs.textarea){if(""!==t.style.fontSize){var e=this.fontSizes.map((function(t){return t.name})).indexOf(t.style.fontSize);e>0&&(document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[e-1].value),document.execCommand("styleWithCSS",!1,!1))}}else document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[1].value),document.execCommand("styleWithCSS",!1,!1)}},mounted:function(){var t=this;document.execCommand("defaultParagraphSeparator",!1,"p"),this.isEmpty=this.isInnerEmpty(this.html,this.html),this.isEmpty?this.$refs.textarea.innerHTML='<p><span class="wrapper" style="font-size: '.concat(this.selectedFontSize,'pt;">&#65279;</span></p>'):this.$refs.textarea.innerHTML=this.html,this.rerenderFormulas();var e=function(e){t.updateCursorPos(e)};document.addEventListener("mouseup",e),this.$once("hook:beforeDestroy",(function(){return document.removeEventListener("mouseup",e)}))}},zt=At,Ft=(i("87b9"),Object(d["a"])(zt,rt,lt,!1,null,"3a7e7154",null)),Lt=Ft.exports,Pt={name:"TextObject",components:{WysiwygMath:Lt},props:["value","editMode"],data:function(){return{isActive:!1,mathWasRendered:!1}},watch:{},methods:{focus:function(){this.$refs.wysimath.focus()},onFocusIn:function(){this.isActive=!0,this.$emit("focusin")},onFocusOut:function(){this.isActive=!1,this.$emit("focusout")}},mounted:function(){this.$emit("initialized",{actions:[{html:'<i class="far fa-edit"></i>',func:this.focus}],onDblClick:this.focus})}},Nt=Pt,Dt=(i("34a5"),Object(d["a"])(Nt,ot,at,!1,null,"2f841b78",null)),Ht=Dt.exports,Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"image_object"},[i("input",{ref:"fileInput",attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg"},on:{change:t.onUpload}}),null===t.url?i("div",{staticClass:"help_text"},[t._v(" Загрузите изображение ")]):i("img",{class:{fill:t.isFilling},attrs:{src:t.url}}),t.showResizeModal?i("image-resize-modal",{attrs:{tabindex:0,"image-url":t.url},on:{focusin:function(e){return t.$emit("focusin")},focusout:function(e){t.showResizeModal=!1,t.$emit("focusout")},"new-image-url":t.onImageCrop}}):t._e()],1)},Wt=[],Vt=(i("2b3d"),i("ddb0"),i("cb29"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"overlay"},[i("div",{staticClass:"overlay__background",on:{"!mousedown":function(t){t.preventDefault(),t.stopPropagation()}}}),i("div",{staticClass:"overlay_button hide_button",on:{click:t.hideSelf}},[i("i",{staticClass:"fas fa-times"})]),i("div",{staticClass:"overlay__content"},[i("div",{ref:"cropper_area",staticClass:"cropper_area",style:t.cropperAreaStyle},[i("img",{staticClass:"cropping",attrs:{src:t.imageUrl},on:{load:function(e){t.isImageLoaded=!0}}}),i("div",{ref:"cropper",staticClass:"cropper",style:t.cropperStyle},[i("div",{ref:"top",staticClass:"size_change top"}),i("div",{ref:"right",staticClass:"size_change right"}),i("div",{ref:"bottom",staticClass:"size_change bottom"}),i("div",{ref:"left",staticClass:"size_change left"}),i("div",{staticClass:"image_wrapper"},[t.isImageLoaded?i("img",{style:t.croppedImageStyle,attrs:{src:t.imageUrl}}):t._e()])])])]),i("div",{staticClass:"overlay_button ok_button",on:{click:t.cropImage}},[t._v("Обрезать ")]),i("canvas",{ref:"canvas",attrs:{width:t.width,height:t.height}})])}),Yt=[],Gt={name:"ImageResizeModal",components:{},props:["imageUrl"],inject:["createImage"],data:function(){return{isImageLoaded:!1,originalWidth:0,originalHeight:0,areaWidth:0,areaHeight:0,cropperAreaStyle:{width:"100%",height:"100%"},x:0,y:0,width:400,height:300}},computed:{cropperStyle:function(){return{width:this.width+"px",height:this.height+"px",left:this.x+"px",top:this.y+"px"}},croppedImageStyle:function(){return{width:this.cropperAreaStyle.width,height:this.cropperAreaStyle.height,transform:"translate(-".concat(this.x,"px, -").concat(this.y,"px)")}}},watch:{imageUrl:function(){this.isImageLoaded=!1}},methods:{hideSelf:function(){this.$emit("focusout")},fitDiv:function(){var t=this;this.createImage(this.imageUrl).then((function(e){t.areaWidth=t.$refs.cropper_area.clientWidth,t.areaHeight=t.$refs.cropper_area.clientHeight,t.originalWidth=e.width,t.originalHeight=e.height;var i=e.width/e.height,n=t.areaWidth/t.areaHeight;i>n?t.areaHeight=t.areaWidth/i:t.areaWidth=t.areaHeight*i,t.cropperAreaStyle.width=t.areaWidth+"px",t.cropperAreaStyle.height=t.areaHeight+"px",t.x=t.areaWidth/2-t.width/2,t.y=t.areaHeight/2-t.height/2}))},cropImage:function(){var t=this,e=this.originalWidth/this.areaWidth,i={sx:this.x*e,sy:this.y*e,sw:this.width*e,sh:this.height*e,dx:0,dy:0,dw:this.width,dh:this.height},n=this.$refs.canvas.getContext("2d");this.createImage(this.imageUrl).then((function(e){n.drawImage(e,i.sx,i.sy,i.sw,i.sh,i.dx,i.dy,i.dw,i.dh);var s=t.$refs.canvas.toDataURL("image/png");t.$emit("new-image-url",s),t.hideSelf()}))},getPosition:function(){return{x:this.x,y:this.y}},getSize:function(){return{width:this.width,height:this.height}},isStillInside:function(t,e,i){return t>=0&&t+e<=i},initializeMovable:function(){var t=this,e=this.$refs.cropper;e.ondragstart=function(){return!1},e.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation();var i=e.clientX,n=e.clientY,s=t.getPosition(),o=function(e){var o=Math.round(e.clientX-i),a=Math.round(e.clientY-n),r=s.x+o,l=s.y+a;t.isStillInside(r,t.width,t.areaWidth)&&(t.x=r),t.isStillInside(l,t.height,t.areaHeight)&&(t.y=l)};document.addEventListener("mousemove",o),document.onmouseup=function(){document.removeEventListener("mousemove",o),document.onmouseup=null}}),!0)},initializeSizeChanger:function(t,e,i){var n=this;t.ondragstart=function(){return!1},t.onmousedown=function(t){t.stopPropagation();var s=t.clientX,o=t.clientY,a=n.getSize(),r=n.getPosition(),l=function(t){var l=Math.round(t.clientX-s),c=Math.round(t.clientY-o);e?i?n.isStillInside(r.x+l,a.width-l,n.areaWidth)&&(n.x=r.x+l,n.width=a.width-l):n.isStillInside(n.x,a.width+l,n.areaWidth)&&(n.width=a.width+l):i?n.isStillInside(r.y+c,a.height-c,n.areaHeight)&&(n.y=r.y+c,n.height=a.height-c):n.isStillInside(n.y,a.height+c,n.areaHeight)&&(n.height=a.height+c)};document.addEventListener("mousemove",l),document.onmouseup=function(){document.removeEventListener("mousemove",l),document.onmouseup=null}}}},created:function(){},mounted:function(){var t=this;this.$emit("focusin"),this.$nextTick().then((function(){t.fitDiv(),t.initializeMovable(),t.initializeSizeChanger(t.$refs.top,!1,!0),t.initializeSizeChanger(t.$refs.right,!0,!1),t.initializeSizeChanger(t.$refs.bottom,!1,!1),t.initializeSizeChanger(t.$refs.left,!0,!0)}))}},Ut=Gt,Xt=(i("2c58"),Object(d["a"])(Ut,Vt,Yt,!1,null,"2507a0ed",null)),qt=Xt.exports,Bt={name:"ImageObject",components:{ImageResizeModal:qt},props:["value"],data:function(){return{isFilling:!1,file:null,image:null,url:null,showResizeModal:!1}},computed:{},watch:{isFilling:function(){this.updateActions(),this.updateValue()},url:function(){this.updateActions(),this.updateValue()}},methods:{createImage:function(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){e(this)},n.onerror=i,n.src=t}))},onUpload:function(t){var e=this,i=!1;if(this.file=t.target.files[0],this.file.size>307200&&(i=!0),i)return alert("Максимальный размер одного файла - 300 Кбайт"),this.$refs.fileInput.value=null,void(this.file=null);this.url=URL.createObjectURL(this.file),this.createImage(this.url).then((function(t){return e.image=t}))},onImageCrop:function(t){this.url=t},updateActions:function(){this.$emit("initialized",{actions:[{html:'<i class="fas fa-upload"></i>',func:this.uploadImage},{html:'<i class="fas fa-crop-alt"></i>',func:this.cropImage,disabled:!this.url},{html:'<i class="fas fa-arrows-alt"></i>',func:this.toggleFilling,isPressed:this.isFilling}],onDblClick:this.toggleFilling})},updateValue:function(){this.$emit("input",{url:this.url,fill:this.isFilling})},uploadImage:function(){this.$refs.fileInput.click()},cropImage:function(){this.showResizeModal=!0},toggleFilling:function(){this.isFilling=!this.isFilling}},provide:function(){return{createImage:this.createImage}},created:function(){this.url=this.value.url,this.isFilling=this.value.fill},mounted:function(){this.updateActions()}},Jt=Bt,Kt=(i("0825"),Object(d["a"])(Jt,Rt,Wt,!1,null,"0ea40b46",null)),Zt=Kt.exports,Qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"youtube_object"},[null===t.videoId?i("div",{staticClass:"help_text"},[t._v(" Укажите ссылку на видео YouTube ")]):i("iframe",{attrs:{src:t.iframeSrc,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}),i("you-tube-link-modal",{ref:"linkAddModal",on:{"set-video-id":t.onSetVideoId}})],1)},te=[],ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{title:"Вставить видео YouTube","cancel-title":"Отмена","ok-title":"Добавить"},on:{ok:t.addVideo},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"urlInput"}},[t._v("Ссылка на ролик YouTube:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control",attrs:{type:"url",id:"urlInput",placeholder:"https://www.youtube.com/watch?v=???"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}})])])},ie=[],ne=(i("466d"),i("ac1f"),{name:"linkModal",props:{},data:function(){return{showModal:!1,url:""}},computed:{},watch:{},methods:{toggle:function(){this.url="",this.showModal=!0},addVideo:function(){var t=this.url.match(/https:\/\/www\.youtube\.com\/watch\?v=(.+)/);null!==t?(this.$emit("set-video-id",t[1]),this.showModal=!1):(alert("Неверный формат URL"),this.url="")}}}),se=ne,oe=Object(d["a"])(se,ee,ie,!1,null,null,null),ae=oe.exports,re={name:"YouTubeObject",components:{YouTubeLinkModal:ae},props:["value"],data:function(){return{videoId:null,autoplay:!1}},computed:{iframeSrc:function(){return"https://www.youtube.com/embed/".concat(this.videoId)}},watch:{videoId:function(){this.updateActions(),this.updateValue()},autoplay:function(){this.updateActions(),this.updateValue()}},methods:{updateActions:function(){this.$emit("initialized",{actions:[{html:'<i class="fas fa-upload"></i>',func:this.$refs.linkAddModal.toggle}],onDblClick:this.toggleAutoplay})},updateValue:function(){this.$emit("input",{videoId:this.videoId,autoplay:this.autoplay})},onSetVideoId:function(t){console.log(t),this.videoId=t},toggleAutoplay:function(){this.autoplay=!this.autoplay}},created:function(){this.videoId=this.value.videoId,this.autoplay=this.value.autoplay},mounted:function(){this.updateActions()}},le=re,ce=(i("ca97"),Object(d["a"])(le,Qt,te,!1,null,"4b0afa94",null)),ue=ce.exports,de=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"answers_object"},t._l(t.columns,(function(e,n){return i("div",{key:n,staticClass:"column"},t._l(e,(function(e,s){return i("div",{key:e.id,staticClass:"answer",class:{correct:t.showCorrectAnswers&&e.is_correct},style:t.answerStyles},[t.isValuable&&t.editMode?i("div",{staticClass:"checkbox",class:{visible:e.is_correct},on:{click:function(i){return t.onCheckboxClick(e)}}},[i("i",{staticClass:"fas fa-check"})]):t.editMode?t._e():i("div",{staticClass:"checkbox letter",style:{"background-color":t.answerColors[t.getAnswerIndex(n,s)]+"bb"}},[t._v(" "+t._s(String.fromCharCode("A".charCodeAt(0)+t.getAnswerIndex(n,s)))+" ")]),i("wysiwyg-math",{ref:"wysimaths",refInFor:!0,style:{"pointer-events":t.isMovableFocused?"auto":"none"},attrs:{functions:t.$store.getters.defaultWysiwygMathConfiguration,html:e.text,"edit-mode":t.editMode},on:{focusin:t.focus,input:function(i){e.text=i,t.updateValue()}}})],1)})),0)})),0)},he=[],fe=(i("4de4"),"ADD_SLIDE_ACTION"),me="UPPER_SLIDE_ACTION",pe="LOWER_SLIDE_ACTION",ve="DUPLICATE_SLIDE_ACTION",ge="DELETE_SLIDE_ACTION",be="SET_SLIDE_TYPE_ACTION",we="SET_SLIDE_TIME_ACTION",ye="ADD_TIMER_ELEMENT",Se="ADD_TEXT_ELEMENT",xe="ADD_IMAGE_ELEMENT",_e="ADD_YOUTUBE_ELEMENT",Ce="ADD_ANSWER_ACTION",Ee="REMOVE_ANSWER_ACTION",Oe="ADD_YES_NO_ANSWERS_ELEMENT",Ie="ADD_SINGLE_CHOICE_ANSWERS_ELEMENT",ke="ADD_MULTIPLE_CHOICE_ANSWERS_ELEMENT",Me="ADD_TEXT_ANSWER_ELEMENT",$e="ADD_QUESTIONING_ANSWERS_ELEMENT",Te="ADD_VOTING_ANSWERS_ELEMENT",je="ADD_TASK_ANSWER_ELEMENT",Ae={name:"AnswersObject",components:{WysiwygMath:Lt},props:["value","editMode"],data:function(){return{isMovableFocused:!1,answerMargin:4,answers:[],columnsCount:1,answerColors:["#65c469","#db7c7c","#4dd7fa","#ffd783","#d757f6","#9a4b32"]}},computed:{isFixedAnswersCount:function(){return!!this.value.fixedAnswersCount},isValuable:function(){return!!this.value.isValuable},isSingleChoice:function(){return!!this.value.isSingleChoice},showCorrectAnswers:function(){return!!this.value.showCorrectAnswers},columns:function(){for(var t=new Array(this.columnsCount).fill(0).map((function(){return[]})),e=Math.floor(this.answers.length/this.columnsCount),i=this.answers.length%this.columnsCount,n=0,s=0,o=0,a=0;a<this.columnsCount;a++)n=a*e+o,s=(a+1)*e+o,i>0&&(s++,i--,o++),t[a]=this.answers.slice(n,s);return t},answerStyles:function(){return{"max-height":"calc(".concat(Math.floor(100/Math.ceil(this.answers.length/this.columnsCount)),"% - ").concat(2*this.answerMargin,"px)"),margin:this.answerMargin+"px"}}},watch:{value:{handler:function(){this.parseValue()},deep:!0},isMovableFocused:function(t){t&&!this.mathWasRendered&&(this.mathWasRendered=!0,window.renderMathInElement(document.body))},columnsCount:function(){this.updateValue()}},methods:{parseValue:function(){this.answers=JSON.parse(JSON.stringify(this.value.answers)),this.columnsCount=this.value.columnsCount},updateActions:function(){var t=this,e=[];e=this.isFixedAnswersCount?[{html:"<b>l</b>",func:function(){return t.columnsCount=1}},{html:"<b>ll</b>",func:function(){return t.columnsCount=2}},{html:"<b>lll</b>",func:function(){return t.columnsCount=3}}]:[{html:'<i class="fas fa-plus"></i>',func:this.addAnswer},{html:'<i class="fas fa-minus"></i>',func:this.removeLastAnswer},{html:"<b>l</b>",func:function(){return t.columnsCount=1}},{html:"<b>ll</b>",func:function(){return t.columnsCount=2}},{html:"<b>lll</b>",func:function(){return t.columnsCount=3}}],this.$emit("initialized",{actions:e})},updateValue:function(){this.$emit("input",{answers:this.answers,columnsCount:this.columnsCount})},onMovableFocusIn:function(){this.isMovableFocused=!0},onMovableFocusOut:function(){this.isMovableFocused=!1},focus:function(){this.$emit("focusin")},onFocusOut:function(){},getAnswerIndex:function(t,e){for(var i=0,n=0;n<t;n++)i+=this.columns[n].length;return i+=e,i},addAnswer:function(){var t=this;this.answers.length<6&&this.$store.dispatch(Ce).then((function(e){t.answers.push(e),t.updateValue()}))},removeLastAnswer:function(){var t=this;this.answers.length>1?this.$store.dispatch(Ee,this.answers[this.answers.length-1].id).then((function(){t.answers.pop(),t.updateValue()})):alert("Нельзя удалить последний ответ")},onCheckboxClick:function(t){this.setCorrect(t),this.updateValue()},setCorrect:function(t){if(t.is_correct){var e=1===this.answers.filter((function(t){return t.is_correct})).length;e?alert("Хотя бы один ответ должен быть правильным"):t.is_correct=!1}else this.isSingleChoice&&this.answers.forEach((function(t){return t.is_correct=!1})),t.is_correct=!0;this.$emit("focusout")}},created:function(){this.parseValue()},mounted:function(){this.updateActions()}},ze=Ae,Fe=(i("c77a"),Object(d["a"])(ze,de,he,!1,null,"a587a646",null)),Le=Fe.exports,Pe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"timer_object"},[i("div",{staticClass:"round"},[i("TextFit",{ref:"text_fit"},[t._v(t._s(t.slide.time))])],1)])},Ne=[],De=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"text_fit",staticClass:"text_fit",class:{visible:t.ready},style:t.textFitStyles},[i("span",{ref:"text"},[t._t("default")],2)])},He=[],Re={name:"TextFit",data:function(){return{ready:!1,fontSize:"1rem",lineHeight:1}},computed:{textFitStyles:function(){return{"font-size":this.fontSize,"line-height":this.lineHeight,height:this.lineHeight}}},methods:{fitText:function(){var t=this;this.ready=!1;var e=this.$refs.text_fit.parentElement.clientHeight;this.fontSize=.6*e+"px",this.lineHeight=.9*e+"px",this.$nextTick((function(){var i=t.$refs.text_fit.clientWidth,n=t.$refs.text.getBoundingClientRect().width;n>i&&(e*=i/n,t.fontSize=.6*e+"px"),t.ready=!0}))}}},We=Re,Ve=(i("9f0e"),Object(d["a"])(We,De,He,!1,null,"769a9644",null)),Ye=Ve.exports,Ge={name:"TimerObject",components:{TextFit:Ye},props:["value"],data:function(){return{timeLeft:0}},computed:{slide:function(){var t=this;return this.$store.state.slides.find((function(e){return e.id===t.value}))}},watch:{"slide.time":function(){this.onResize()}},methods:{onResize:function(){this.$nextTick(this.$refs.text_fit.fitText)}},created:function(){}},Ue=Ge,Xe=(i("34f9"),Object(d["a"])(Ue,Pe,Ne,!1,null,"1346d5f8",null)),qe=Xe.exports,Be={name:"SlideElement",components:{TimerObject:qe,TextObject:Ht,ImageObject:Zt,YouTubeObject:ue,AnswersObject:Le},props:["element","editMode","slideWidth","slideHeight","cellSize"],inject:{canDeleteElement:{default:function(){}}},data:function(){return{isHovered:!1,isElementFocused:!1,isInnerFocused:!1,isMoving:!1,innerSetTimeout:null,defaultZ:"20",activeZ:"21",onDblClick:function(){},actions:[],x:0,y:0,width:0,height:0,noActions:!1,noResize:!1,noDelete:!1,allowPointerEvents:!1}},computed:{position:function(){return[this.x,this.y]},size:function(){return[this.width,this.height]},isOutside:function(){return this.x<0||this.y<0||this.x+this.width>this.slideWidth||this.y+this.height>this.slideHeight},isOnlyElementFocused:function(){return this.isElementFocused&&!this.isInnerFocused},movableClasses:function(){return{focused:this.isElementFocused,selected:this.isInnerFocused,moving:this.isMoving,outside:this.isOutside,inactive:!this.isElementFocused&&!this.isInnerFocused,bordered:this.editMode&&this.$store.state.slideParams.showGrid}},areActionsHidden:function(){return this.noActions||!this.isOnlyElementFocused},innerComponentStyles:function(){return{"pointer-events":this.allowPointerEvents&&this.editMode?"auto":"none"}}},watch:{position:function(){this.editMode&&(this.isMoving=!0,this.moveSlideElement({id:this.element.id,x:this.x,y:this.y})),this.$refs.movable.style.left=this.x*this.cellSize+"px",this.$refs.movable.style.top=this.y*this.cellSize+"px"},size:function(){this.editMode&&(this.resizeSlideElement({id:this.element.id,width:this.width,height:this.height}),this.$refs.inner_component.onResize&&this.$refs.inner_component.onResize()),this.$refs.movable.style.width=this.width*this.cellSize+"px",this.$refs.movable.style.height=this.height*this.cellSize+"px"},isElementFocused:function(t){var e=this;t?this.$nextTick().then((function(){e.initializeSizeChanger(e.$refs.top,!1,!0,{x:!1,y:!0}),e.initializeSizeChanger(e.$refs.right,!0,!1),e.initializeSizeChanger(e.$refs.bottom,!1,!0),e.initializeSizeChanger(e.$refs.left,!0,!1,{x:!0,y:!1}),e.initializeSizeChanger(e.$refs.left_top,!0,!0,{x:!0,y:!0}),e.initializeSizeChanger(e.$refs.left_bottom,!0,!0,{x:!0,y:!1}),e.initializeSizeChanger(e.$refs.right_top,!0,!0,{x:!1,y:!0}),e.initializeSizeChanger(e.$refs.right_bottom,!0,!0)})):this.onInnerFocusOut()}},methods:Object(b["a"])(Object(b["a"])({},Object(S["d"])({moveSlideElement:P,resizeSlideElement:N,setElementValue:D})),{},{onClick:function(t){this.isMoving&&t.stopPropagation()},onMouseLeave:function(){this.isHovered=!1},onMovableFocusIn:function(){this.isElementFocused=!0,this.$refs.inner_component.onMovableFocusIn&&this.$refs.inner_component.onMovableFocusIn()},onMovableFocusOut:function(){this.isElementFocused=!1,this.$refs.inner_component.onMovableFocusOut&&this.$refs.inner_component.onMovableFocusOut()},getPosition:function(){return{x:this.x,y:this.y}},getSize:function(){return{width:this.width,height:this.height}},setValue:function(t){this.editMode&&this.setElementValue(t)},moveSelfInside:function(){this.isOutside&&(this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x+this.width>this.slideWidth&&(this.x=this.slideWidth-this.width),this.y+this.height>this.slideHeight&&(this.y=this.slideHeight-this.height)),this.isOutside&&(this.width>this.slideWidth&&(this.width=this.slideWidth),this.height>this.slideHeight&&(this.height=this.slideHeight),this.moveSelfInside())},initializeMovable:function(){var t=this,e=this.$refs.movable;e.ondragstart=function(){return!1},e.onmousedown=function(i){if(!t.isInnerFocused){e.style.zIndex=t.activeZ;var n=i.clientX,s=i.clientY,o=t.getPosition(),a=function(e){var i=Math.round((e.clientX-n)/t.cellSize),a=Math.round((e.clientY-s)/t.cellSize);t.x=o.x+i,t.y=o.y+a};document.addEventListener("mousemove",a),document.onmouseup=function(){t.moveSelfInside(),setTimeout((function(){t.isMoving=!1}),100),e.style.zIndex=t.defaultZ,document.removeEventListener("mousemove",a),document.onmouseup=null}}}},initializeSizeChanger:function(t,e,i){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:!1,y:!1};if(void 0!==t){var o=s.x,a=s.y;t.ondragstart=function(){return!1},t.onmousedown=function(s){s.stopPropagation(),n.isMoving=!0,t.style.zIndex=n.activeZ;var r=s.clientX,l=s.clientY,c=n.getSize(),u=n.getPosition(),d=function(t){var s=Math.round((t.clientX-r)/n.cellSize),d=Math.round((t.clientY-l)/n.cellSize);e&&(o?(n.x=u.x+s,n.width=c.width-s):n.width=c.width+s),i&&(a?(n.y=u.y+d,n.height=c.height-d):n.height=c.height+d)};document.addEventListener("mousemove",d),document.onmouseup=function(){n.moveSelfInside(),setTimeout((function(){n.isMoving=!1}),100),t.style.zIndex=n.defaultZ,document.removeEventListener("mousemove",d),document.onmouseup=null}}}},deleteSelf:function(){var t=this.canDeleteElement(this.element.content.component);!0===t?this.$store.commit(L,this.element.id):alert(t)},onKeyUp:function(t){this.isOnlyElementFocused&&("Delete"!==t.key||this.noDelete||this.deleteSelf())},onInnerFocusIn:function(){var t=this;clearTimeout(this.innerSetTimeout),this.innerSetTimeout=setTimeout((function(){return t.isInnerFocused=!0}),0)},onInnerFocusOut:function(){var t=this;clearTimeout(this.innerSetTimeout),this.innerSetTimeout=setTimeout((function(){return t.isInnerFocused=!1}),200)},onInnerInitialized:function(t){this.actions=t.actions,t.onDblClick&&(this.onDblClick=t.onDblClick)}}),created:function(){var t=this;Object.entries(this.element).forEach((function(e){var i=Object(st["a"])(e,2),n=i[0],s=i[1];return t[n]=s}))},mounted:function(){var t=this;this.editMode&&this.initializeMovable(),this.$nextTick((function(){t.isMoving=!1}))}},Je=Be,Ke=(i("54fe"),Object(d["a"])(Je,it,nt,!1,null,"5da1ca34",null)),Ze=Ke.exports,Qe={name:"SlidePreview",props:["slideId"],components:{RatioKeeper:et,SlideElement:Ze},data:function(){return{editMode:!1,slideState:1,updateTimeout:null,ready:!1,ratio:16/9,previewWidth:"100%",previewHeight:0}},computed:Object(b["a"])(Object(b["a"])({},Object(S["e"])({height:function(t){return t.slideParams.height},slideWidth:function(t){return t.slideParams.widthCells},slideHeight:function(t){return t.slideParams.heightCells},cellSize:function(t){return t.slideParams.cellSize},showGrid:function(t){return t.slideParams.showGrid}})),{},{previewStyles:function(){return{width:this.previewWidth,height:this.previewHeight}},isShowingGrid:function(){return this.editMode&&this.showGrid},slide:function(){var t=this;return this.$store.state.slides.find((function(e){return e.id===t.slideId}))},slideTypeSet:function(){return-1!==this.slide.type}}),watch:{slide:{deep:!0,handler:function(){var t=this;clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout((function(){return t.slideState++}),1e3)}}},methods:{},mounted:function(){this.previewWidth=this.$refs.preview.clientWidth+"px",this.previewHeight=this.$refs.preview.clientWidth/this.ratio+"px",this.ready=!0}},ti=Qe,ei=(i("8b41"),Object(d["a"])(ti,X,q,!1,null,"375c0183",null)),ii=ei.exports,ni={name:"Sidebar",components:{SlidePreview:ii},props:{},data:function(){return{mounted:!1}},computed:Object(b["a"])(Object(b["a"])({},Object(S["c"])(["slideIds","activeSlide"])),{},{hasScroll:function(){return!!this.mounted&&this.$refs.slides.scrollHeight>this.$refs.slides.clientHeight}}),watch:{activeSlide:function(){this.$nextTick((function(){var t=document.querySelector(".sidebar_item.selected");t.scrollIntoView()}))}},methods:Object(b["a"])(Object(b["a"])(Object(b["a"])({},Object(S["d"])({setActiveSlide:C})),Object(S["b"])({addSlide:fe,upperSlide:me,lowerSlide:pe,duplicateSlide:ve,deleteSlide:ge})),{},{isSlideSelected:function(t){return void 0!==this.$store.getters.activeSlide&&t===this.$store.getters.activeSlide.id}}),mounted:function(){this.mounted=!0}},si=ni,oi=(i("c49e"),Object(d["a"])(si,G,U,!1,null,"059b80be",null)),ai=oi.exports,ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("SlideEditor",{attrs:{id:"slide_editor","no-controls":""}})},li=[],ci=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slide_editor"},[i("div",{staticClass:"params_area border-bottom"},[i("div",{staticClass:"row px-3"},[i("div",{staticClass:"col-5 col-md-4 col-lg-3"},[i("label",{staticClass:"form-label",attrs:{for:"slideTypeSelect"}},[t._v(" Тип слайда ")]),i("select",{staticClass:"custom-select",attrs:{id:"slideTypeSelect"},domProps:{value:t.activeSlide.type},on:{change:function(e){return t.setSlideTypeAction(e.target.value)}}},[i("option",{attrs:{disabled:""},domProps:{value:-1}},[t._v("Выберите тип слайда")]),t._l(t.$store.state.slideTypes,(function(e){return i("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name)+" ")])}))],2)]),null!==t.$store.getters.activeSlideComponent?[i("div",{staticClass:"col-4 col-md-3 col-lg-2"},[i("label",{staticClass:"form-label",attrs:{for:"slideTimeInput"}},[t._v(" Время показа ")]),i("input",{staticClass:"form-control",attrs:{type:"number",id:"slideTimeInput",placeholder:"Введите число",min:"0"},domProps:{value:t.activeSlide.time},on:{input:function(e){return t.setSlideTimeAction(e.target.value)}}})])]:t._e(),t._t("params")],2)]),t.noControls?i("div",{staticClass:"help_text"},[t._v("Выберите нужный тип слайда ")]):i("div",{staticClass:"slide_controls_area"},[i("div",{ref:"slide_area",staticClass:"slide_area",style:t.slideAreaStyles},[i("RatioKeeper",{class:{zoom_cursor:t.keeperFitContent},attrs:{ratio:16/9,"min-height":500,"fit-content":t.keeperFitContent},nativeOn:{mousedown:function(e){return t.onKeeperClick(e)}}},[i("Slide",{attrs:{"slide-id":t.activeSlide.id,"edit-mode":t.isInEditMode}})],1)],1),i("div",{staticClass:"controls_area border-start"},[i("button",{staticClass:"controls_area__button",on:{click:t.addText}},[i("i",{staticClass:"fas fa-align-justify"}),t._v(" Текст ")]),i("button",{staticClass:"controls_area__button",on:{click:t.addImage}},[i("i",{staticClass:"far fa-image"}),t._v(" Картинка ")]),i("button",{staticClass:"controls_area__button",on:{click:t.addYouTube}},[i("i",{staticClass:"fab fa-youtube"}),t._v(" YouTube ")]),t._t("controls"),i("div",{staticStyle:{flex:"1 1 auto"}}),i("button",{staticClass:"controls_area__temp_button",on:{click:t.toggleScrollbars}},[t._v(t._s(t.$store.state.slideParams.isEntirelyVisible?"Показать":"Скрыть")+" скролл ")]),i("button",{staticClass:"controls_area__temp_button",on:{click:t.toggleGrid}},[t._v(t._s(t.$store.state.slideParams.showGrid?"Скрыть":"Показать")+" сетку ")]),i("button",{staticClass:"controls_area__temp_button",on:{click:t.logState}},[t._v("Log vuex state ")])],2)])])},ui=[],di=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"slide",staticClass:"slide"},[t.isShowingGrid?i("div",{staticClass:"grid",style:{"background-size":t.backgroundSize}}):t._e(),t._l(t.slideElements,(function(e){return i("SlideElement",t._b({key:e.id},"SlideElement",{element:e,editMode:t.editMode,slideWidth:t.slideWidth,slideHeight:t.slideHeight,cellSize:t.cellSize},!1))}))],2)},hi=[],fi={name:"Slide",components:{SlideElement:Ze},props:{slideId:{type:Number},editMode:{type:Boolean,default:!1}},data:function(){return{backgroundSize:"calc(100% / 16) calc(100% / 9)"}},computed:Object(b["a"])(Object(b["a"])({},Object(S["e"])({slideWidth:function(t){return t.slideParams.widthCells},slideHeight:function(t){return t.slideParams.heightCells},cellSize:function(t){return t.slideParams.cellSize},showGrid:function(t){return t.slideParams.showGrid}})),{},{isShowingGrid:function(){return this.editMode&&this.showGrid},slideElements:function(){var t=this;return this.$store.state.slides.find((function(e){return e.id===t.slideId})).slideElements}}),methods:{setGridSize:function(){this.$store.commit(j,this.$refs.slide.clientHeight),this.backgroundSize="".concat(100/this.slideWidth,"% ").concat(100/this.slideHeight,"%")}},mounted:function(){this.setGridSize()}},mi=fi,pi=(i("9c98"),Object(d["a"])(mi,di,hi,!1,null,"cf031f98",null)),vi=pi.exports,gi={name:"SlideEditor",components:{Slide:vi,RatioKeeper:et},props:{noControls:Boolean},data:function(){return{isInEditMode:!0,slideAreaStyles:{"--scrollLeft":"0px","--scrollTop":"0px"}}},computed:Object(b["a"])(Object(b["a"])({},Object(S["e"])({keeperFitContent:function(t){return t.slideParams.isEntirelyVisible}})),Object(S["c"])(["activeSlide"])),methods:Object(b["a"])(Object(b["a"])(Object(b["a"])({},Object(S["d"])({toggleGrid:A,toggleScrollbars:z})),Object(S["b"])({setSlideTypeAction:be,setSlideTimeAction:we})),{},{onKeeperClick:function(t){this.keeperFitContent&&(t.preventDefault(),this.toggleScrollbars())},addText:function(){this.$store.dispatch(Se,{x:4,y:2,width:56,height:20})},addImage:function(){this.$store.dispatch(xe,{x:44,y:0,width:18,height:11})},addYouTube:function(){this.$store.dispatch(_e,{x:44,y:12,width:18,height:11})},logState:function(){console.log(this.$store.state)},updateScrollValues:function(){this.slideAreaStyles["--scrollLeft"]=this.$refs.slide_area.scrollLeft+"px",this.slideAreaStyles["--scrollTop"]=this.$refs.slide_area.scrollTop+"px"}}),mounted:function(){this.noControls||this.$refs.slide_area.addEventListener("scroll",this.updateScrollValues)}},bi=gi,wi=(i("d5ca"),Object(d["a"])(bi,ci,ui,!1,null,null,null)),yi=wi.exports,Si={name:"SingleChoice",components:{SlideEditor:yi}},xi=Si,_i=Object(d["a"])(xi,ri,li,!1,null,null,null),Ci=_i.exports,Ei=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("SlideEditor",{attrs:{id:"slide_editor"},scopedSlots:t._u([{key:"params",fn:function(){return[i("div",{staticClass:"col-4 col-md-3 col-xl-2"},[i("label",{staticClass:"form-label",attrs:{for:"slidePriceInput"}},[t._v(" Кол-во баллов ")]),i("input",{staticClass:"form-control",attrs:{type:"number",id:"slidePriceInput",placeholder:"Введите число",min:"0"},domProps:{value:t.activeSlide.price},on:{input:function(e){return t.setSlidePrice(e.target.value)}}})])]},proxy:!0}])})},Oi=[],Ii=(i("b64b"),{name:"Restricted",data:function(){return{restrictions:{}}},methods:{countElementsOnSlide:function(t){return this.$store.getters.activeSlideElements.filter((function(e){return e.content.component===t})).length},tryAction:function(t,e,i){t in this.restrictions?this.countElementsOnSlide(t)<this.restrictions[t].max?this.$store.dispatch(e,i):alert("На слайде уже есть ".concat(this.restrictions.TextObject.max," ").concat(t)):alert("elName not in this.restrictions")}},provide:function(){var t=this;return{canDeleteElement:function(e){return!(e in t.restrictions)||t.countElementsOnSlide(e)>t.restrictions[e].min||"На слайде должно быть минимум ".concat(t.restrictions[e].min," ").concat(e)}}},created:function(){0===Object.keys(this.restrictions).length&&console.warn("Похоже, что для типа слайда не заданы restrictions, но примесь используется")}}),ki=Ii,Mi=Object(d["a"])(ki,n,s,!1,null,null,null),$i=Mi.exports,Ti={name:"YesNo",components:{SlideEditor:yi},mixins:[$i],props:{},data:function(){return{restrictions:{}}},computed:Object(b["a"])({},Object(S["c"])(["activeSlide"])),methods:Object(b["a"])(Object(b["a"])({},Object(S["d"])({setSlidePrice:T})),{},{addText:function(){this.tryAction("TextObject",Se,{x:5,y:5,width:20,height:10})}})},ji=Ti,Ai=Object(d["a"])(ji,Ei,Oi,!1,null,"4ea317e0",null),zi=Ai.exports,Fi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("SlideEditor",{attrs:{id:"slide_editor"},scopedSlots:t._u([{key:"params",fn:function(){return[i("div",{staticClass:"col-4 col-md-3 col-xl-2"},[i("label",{staticClass:"form-label",attrs:{for:"slidePriceInput"}},[t._v(" Кол-во баллов ")]),i("input",{staticClass:"form-control",attrs:{type:"number",id:"slidePriceInput",placeholder:"Введите число",min:"0"},domProps:{value:t.activeSlide.price},on:{input:function(e){return t.setSlidePrice(e.target.value)}}})])]},proxy:!0},{key:"controls",fn:function(){return[i("button",{staticClass:"controls_area__button",on:{click:t.addAnswer}},[i("i",{staticClass:"fas fa-plus"}),t._v(" Ответ ")])]},proxy:!0}])})},Li=[],Pi={name:"AddAnswer",computed:Object(b["a"])({},Object(S["c"])(["activeSlide"])),methods:Object(b["a"])(Object(b["a"])(Object(b["a"])({},Object(S["d"])({addAnswerToAnswersElement:H})),Object(S["b"])({addValuableAnswerAction:Ce})),{},{addAnswer:function(){var t=this,e=this.activeSlide.slideElements.find((function(t){return"AnswersObject"===t.content.component}));e.content.value.answers.length<6&&this.addValuableAnswerAction().then((function(i){t.addAnswerToAnswersElement({id:e.id,answer:i})}))}})},Ni=Pi,Di=Object(d["a"])(Ni,o,a,!1,null,null,null),Hi=Di.exports,Ri={name:"SingleChoice",components:{SlideEditor:yi},mixins:[$i,Hi],props:{},data:function(){return{restrictions:{}}},computed:Object(b["a"])({},Object(S["c"])(["activeSlide"])),methods:Object(b["a"])({},Object(S["d"])({setSlidePrice:T}))},Wi=Ri,Vi=Object(d["a"])(Wi,Fi,Li,!1,null,"2529370e",null),Yi=Vi.exports,Gi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("SlideEditor",{attrs:{id:"slide_editor"},scopedSlots:t._u([{key:"params",fn:function(){return[i("div",{staticClass:"col-4 col-md-3 col-xl-2"},[i("label",{staticClass:"form-label",attrs:{for:"slidePriceInput"}},[t._v(" Кол-во баллов ")]),i("input",{staticClass:"form-control",attrs:{type:"number",id:"slidePriceInput",placeholder:"Введите число",min:"0"},domProps:{value:t.activeSlide.price},on:{input:function(e){return t.setSlidePrice(e.target.value)}}})])]},proxy:!0},{key:"controls",fn:function(){return[i("button",{staticClass:"controls_area__button",on:{click:t.addAnswer}},[i("i",{staticClass:"fas fa-plus"}),t._v(" Ответ ")])]},proxy:!0}])})},Ui=[],Xi={name:"MultipleChoice",components:{SlideEditor:yi},mixins:[$i,Hi],props:{},data:function(){return{restrictions:{}}},computed:Object(b["a"])({},Object(S["c"])(["activeSlide"])),methods:Object(b["a"])(Object(b["a"])({},Object(S["d"])({setSlidePrice:T})),{},{addText:function(){this.tryAction("TextObject",Se,{x:5,y:5,width:20,height:10})}})},qi=Xi,Bi=Object(d["a"])(qi,Gi,Ui,!1,null,"011577f8",null),Ji=Bi.exports,Ki=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("SlideEditor",{attrs:{id:"slide_editor"}})},Zi=[],Qi={name:"Info",components:{SlideEditor:yi},mixins:[$i],props:{},computed:{},methods:{}},tn=Qi,en=Object(d["a"])(tn,Ki,Zi,!1,null,"021701f2",null),nn=en.exports,sn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("SlideEditor",{attrs:{id:"slide_editor"},scopedSlots:t._u([{key:"controls",fn:function(){return[i("button",{staticClass:"controls_area__button",on:{click:t.addAnswer}},[i("i",{staticClass:"fas fa-plus"}),t._v(" Ответ ")])]},proxy:!0}])})},on=[],an={name:"Voting",components:{SlideEditor:yi},mixins:[$i,Hi],props:{},data:function(){return{restrictions:{}}},methods:{addText:function(){this.tryAction("TextObject",Se,{x:5,y:5,width:20,height:10})}}},rn=an,ln=Object(d["a"])(rn,sn,on,!1,null,"a511df66",null),cn=ln.exports,un={name:"Editor",components:{Heading:Y,Sidebar:ai,TypeNotSelected:Ci,YesNo:zi,SingleChoice:Yi,MultipleChoice:Ji,Voting:cn,Info:nn},computed:Object(b["a"])(Object(b["a"])({isAnySlideSelected:function(){return void 0!==this.activeSlide}},Object(S["c"])(["slideIds","activeSlide"])),{},{activeSlideComponent:function(){return this.$store.getters.activeSlideComponent||"TypeNotSelected"}})},dn=un,hn=(i("9fca"),Object(d["a"])(dn,v,g,!1,null,"437151e5",null)),fn=hn.exports,mn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slide_editor"},[i("wysiwyg-math",{ref:"wysimath",attrs:{functions:t.$store.getters.defaultWysiwygMathConfiguration}})],1)},pn=[],vn={name:"Editor",components:{WysiwygMath:Lt},computed:{}},gn=vn,bn=(i("9f3b"),Object(d["a"])(gn,mn,pn,!1,null,"78e859b9",null)),wn=bn.exports;r["default"].use(p["a"]);var yn,Sn,xn,_n,Cn,En=[{path:"/",component:fn},{path:"/wysimath",component:wn}],On=new p["a"]({base:"/",routes:En,mode:"history"}),In=On,kn=i("ade3"),Mn=(i("a434"),i("c740"),yn={},Object(kn["a"])(yn,x,(function(t,e){t.presentationInfo=e})),Object(kn["a"])(yn,_,(function(t,e){t.slides.push(e)})),Object(kn["a"])(yn,C,(function(t,e){t.activeSlideId=e})),Object(kn["a"])(yn,E,(function(t,e){var i=e.newSlide,n=e.afterSlideId;t.slides.splice(t.slides.findIndex((function(t){return t.id===n}))+1,0,i)})),Object(kn["a"])(yn,O,(function(t,e){var i=t.slides.find((function(t){return t.id===e})),n=t.slides.indexOf(i);t.slides.splice(n,1),t.slides.splice(n-1,0,i)})),Object(kn["a"])(yn,I,(function(t,e){var i=t.slides.find((function(t){return t.id===e})),n=t.slides.indexOf(i);t.slides.splice(n,1),t.slides.splice(n+1,0,i)})),Object(kn["a"])(yn,k,(function(t,e){t.slides.splice(t.slides.findIndex((function(t){return t.id===e})),1)})),Object(kn["a"])(yn,M,(function(t,e){var i=t.slides.find((function(e){return e.id===t.activeSlideId}));i.type=parseInt(e)})),Object(kn["a"])(yn,$,(function(t,e){var i=t.slides.find((function(e){return e.id===t.activeSlideId}));i.time=e})),Object(kn["a"])(yn,T,(function(t,e){var i=t.slides.find((function(e){return e.id===t.activeSlideId}));i.price=e})),yn),$n=(Sn={},Object(kn["a"])(Sn,j,(function(t,e){t.slideParams.height=e,t.slideParams.cellSize=e/t.slideParams.heightCells})),Object(kn["a"])(Sn,A,(function(t){t.slideParams.showGrid=!t.slideParams.showGrid})),Object(kn["a"])(Sn,z,(function(t){t.slideParams.isEntirelyVisible=!t.slideParams.isEntirelyVisible})),Sn),Tn=1,jn=(xn={},Object(kn["a"])(xn,F,(function(t,e){var i=t.slides.find((function(e){return e.id===t.activeSlideId})).slideElements;i.push(Object(b["a"])({id:Tn++},e))})),Object(kn["a"])(xn,L,(function(t,e){var i=t.slides.find((function(e){return e.id===t.activeSlideId})).slideElements,n=i.map((function(t){return t.id})).indexOf(e);i.splice(n,1)})),Object(kn["a"])(xn,P,(function(t,e){var i=e.id,n=e.x,s=e.y,o=t.slides.find((function(e){return e.id===t.activeSlideId})).slideElements.find((function(t){return t.id===i}));o.x=n,o.y=s})),Object(kn["a"])(xn,N,(function(t,e){var i=e.id,n=e.width,s=e.height,o=t.slides.find((function(e){return e.id===t.activeSlideId})).slideElements.find((function(t){return t.id===i}));o.width=n,o.height=s})),Object(kn["a"])(xn,D,(function(t,e){var i=e.id,n=e.value,s=t.slides.find((function(e){return e.id===t.activeSlideId})).slideElements.find((function(t){return t.id===i}));s.content.value=JSON.parse(JSON.stringify(Object.assign(s.content.value,n)))})),Object(kn["a"])(xn,H,(function(t,e){var i=e.id,n=e.answer,s=t.slides.find((function(e){return e.id===t.activeSlideId})).slideElements.find((function(t){return t.id===i}));s.content.value.answers.push(n)})),xn),An=1,zn=2,Fn=60,Ln=(_n={},Object(kn["a"])(_n,fe,(function(t){var e=t.state,i=t.commit,n=t.dispatch,s=zn;e.slides.length>0&&(s=e.slides[e.slides.length-1].type),new Promise((function(t){t({id:An++,type:-1,time:0,price:0,slideElements:[]})})).then((function(t){return i(_,t),t})).then((function(t){return i(C,t.id)})).then((function(){return n(we,Fn)})).then((function(){return n(be,s)}))})),Object(kn["a"])(_n,me,(function(t,e){var i=t.commit;new Promise((function(t){t(e)})).then((function(t){return i(O,t)}))})),Object(kn["a"])(_n,pe,(function(t,e){var i=t.commit;new Promise((function(t){t(e)})).then((function(t){return i(I,t)}))})),Object(kn["a"])(_n,ve,(function(t,e){var i=t.commit,n=t.state,s=n.slides.find((function(t){return t.id===e})),o=JSON.parse(JSON.stringify(s));o.id+=100,o.slideElements.forEach((function(t){t.id+=1e3,"TimerObject"===t.content.component&&(t.content.value=o.id)})),new Promise((function(t){t(o)})).then((function(t){return i(E,{newSlide:t,afterSlideId:e})}))})),Object(kn["a"])(_n,ge,(function(t,e){var i=t.state,n=t.commit;new Promise((function(t){t()})).then((function(){var t=i.slides.findIndex((function(t){return t.id===e}));t!==i.slides.length-1?n(C,i.slides[t+1].id):i.slides.length>1&&n(C,i.slides[t-1].id),n(k,e)}))})),_n),Pn={YesNo:{initial:{actions:[{name:Se,payload:{x:4,y:2,width:56,height:20}},{name:Oe}],mutations:[{name:T,payload:1}]}},SingleChoice:{initial:{actions:[{name:Se,payload:{x:4,y:2,width:56,height:20}},{name:Ie}],mutations:[{name:T,payload:1}]}},MultipleChoice:{initial:{actions:[{name:Se,payload:{x:4,y:2,width:56,height:20}},{name:ke}],mutations:[{name:T,payload:1}]}},TextAnswer:{initial:{actions:[{name:Se,payload:{x:4,y:2,width:56,height:20}},{name:Me}],mutations:[{name:T,payload:1}]}},Questioning:{initial:{actions:[{name:Se,payload:{x:4,y:2,width:56,height:20}},{name:$e}],mutations:[{name:T,payload:0}]}},Voting:{initial:{actions:[{name:Se,payload:{x:4,y:2,width:56,height:20}},{name:Te}],mutations:[{name:T,payload:0}]}},Task:{initial:{actions:[{name:Se,payload:{x:4,y:2,width:56,height:20}},{name:je}],mutations:[{name:T,payload:1}]}},Info:{initial:{actions:[{name:Se,payload:{x:4,y:2,width:56,height:20}},{name:we,payload:0}],mutations:[{name:T,payload:0}]}}},Nn=1,Dn=["TimerObject"],Hn=(Cn={},Object(kn["a"])(Cn,be,(function(t,e){var i=t.getters,n=t.commit,s=t.dispatch,o=[];i.activeSlide.slideElements.forEach((function(t){Dn.includes(t.content.component)||o.push(t.id)})),o.forEach((function(t){return n(L,t)})),n(M,e),Pn[i.activeSlideComponent].initial&&("actions"in Pn[i.activeSlideComponent].initial&&Pn[i.activeSlideComponent].initial.actions.forEach((function(t){void 0!==t.payload?s(t.name,t.payload):s(t.name)})),"mutations"in Pn[i.activeSlideComponent].initial&&Pn[i.activeSlideComponent].initial.mutations.forEach((function(t){void 0!==t.payload?n(t.name,t.payload):n(t.name)})))})),Object(kn["a"])(Cn,we,(function(t,e){var i=t.getters,n=t.commit,s=t.dispatch,o=i.activeSlide.time>0;if(e=parseInt(e),(isNaN(e)||e<0)&&(e=0),n($,e),0===e&&o){var a=i.activeSlide.slideElements.find((function(t){return"TimerObject"===t.content.component}));n(L,a.id)}else e>0&&!o&&s(ye,{x:60,y:1,width:3,height:3,noActions:!0,noDelete:!0})})),Object(kn["a"])(Cn,ye,(function(t,e){var i=t.getters,n=t.commit;n(F,Object(b["a"])(Object(b["a"])({},e),{},{content:{component:"TimerObject",value:i.activeSlide.id}}))})),Object(kn["a"])(Cn,Se,(function(t,e){var i=t.commit;i(F,Object(b["a"])(Object(b["a"])({},e),{},{content:{component:"TextObject",value:{html:""}}}))})),Object(kn["a"])(Cn,xe,(function(t,e){var i=t.commit;i(F,Object(b["a"])(Object(b["a"])({},e),{},{content:{component:"ImageObject",value:{url:null,fill:!1}}}))})),Object(kn["a"])(Cn,_e,(function(t,e){var i=t.commit;i(F,Object(b["a"])(Object(b["a"])({},e),{},{content:{component:"YouTubeObject",value:{videoId:null,autoplay:!1}}}))})),Object(kn["a"])(Cn,Ce,(function(){return new Promise((function(t){t({id:Nn++,text:"",is_correct:!1})}))})),Object(kn["a"])(Cn,Ee,(function(t){return new Promise((function(t){t()}))})),Object(kn["a"])(Cn,Oe,(function(t){var e=t.commit,i=t.dispatch,n=[];i(Ce).then((function(t){return t.text='<p style="text-align: center;"><span class="wrapper" style="font-size: 36pt;">Да</span></p>',n.push(t),i(Ce)})).then((function(t){t.text='<p style="text-align: center;"><span class="wrapper" style="font-size: 36pt;">Нет</span></p>',n.push(t)})).then((function(){n.map((function(t){return t.is_correct})).includes(!0)||(n[0].is_correct=!0),e(F,{x:4,y:24,width:56,height:10,content:{component:"AnswersObject",value:{answers:n,columnsCount:2,fixedAnswersCount:!0,isValuable:!0,isSingleChoice:!0}},noDelete:!0,allowPointerEvents:!0})}))})),Object(kn["a"])(Cn,Ie,(function(t){var e=t.commit,i=t.dispatch,n=[];i(Ce).then((function(t){return n.push(t),i(Ce)})).then((function(t){return n.push(t),i(Ce)})).then((function(t){return n.push(t),i(Ce)})).then((function(t){return n.push(t)})).then((function(){n.map((function(t){return t.is_correct})).includes(!0)||(n[0].is_correct=!0),e(F,{x:4,y:24,width:56,height:10,content:{component:"AnswersObject",value:{answers:n,columnsCount:2,isValuable:!0,isSingleChoice:!0}},noDelete:!0,allowPointerEvents:!0})}))})),Object(kn["a"])(Cn,ke,(function(t){var e=t.commit,i=t.dispatch,n=[];i(Ce).then((function(t){return n.push(t),i(Ce)})).then((function(t){return n.push(t),i(Ce)})).then((function(t){return n.push(t),i(Ce)})).then((function(t){return n.push(t)})).then((function(){n.map((function(t){return t.is_correct})).includes(!0)||(n[0].is_correct=!0),e(F,{x:4,y:24,width:56,height:10,content:{component:"AnswersObject",value:{answers:n,columnsCount:2,isValuable:!0}},noDelete:!0,allowPointerEvents:!0})}))})),Object(kn["a"])(Cn,Te,(function(t){var e=t.commit,i=t.dispatch,n=[];i(Ce).then((function(t){return n.push(t),i(Ce)})).then((function(t){return n.push(t),i(Ce)})).then((function(t){return n.push(t),i(Ce)})).then((function(t){return n.push(t)})).then((function(){e(F,{x:4,y:24,width:56,height:10,content:{component:"AnswersObject",value:{answers:n,columnsCount:2}},noDelete:!0,allowPointerEvents:!0})}))})),Cn);r["default"].use(S["a"]);var Rn=new S["a"].Store({state:{slideParams:{height:0,widthCells:64,heightCells:36,cellSize:0,showGrid:!0,isEntirelyVisible:!1},presentationInfo:{name:"Презентация 1",description:"123",keywords:"",language:2},activeSlideId:null,slides:[],slideTypes:[{id:1,name:"ТЕСТ: Да/Нет",component:"YesNo"},{id:2,name:"ТЕСТ: Единственный выбор",component:"SingleChoice"},{id:3,name:"ТЕСТ: Множественный выбор",component:"MultipleChoice"},{id:6,name:"ОПРОС: Голосование",component:"Voting"},{id:8,name:"Информация",component:"Info"}]},getters:{defaultWysiwygMathConfiguration:function(){return["textStyle","fontSize","textAlign","lists","linkInsert","codeInsert","formulaInsert","redo"]},slideIds:function(t){return t.slides.map((function(t){return t.id}))},activeSlide:function(t){return t.slides.find((function(e){return e.id===t.activeSlideId}))},activeSlideElements:function(t,e){return e.activeSlide.slideElements},activeSlideComponent:function(t,e){return-1===e.activeSlide.type?null:t.slideTypes.find((function(t){return t.id===e.activeSlide.type})).component}},mutations:Object(b["a"])(Object(b["a"])(Object(b["a"])({},Mn),$n),jn),actions:Object(b["a"])(Object(b["a"])({},Ln),Hn),modules:{},strict:!1});i("f9e3"),i("2dd8");r["default"].config.productionTip=!1,r["default"].use(l["a"]),new r["default"]({router:In,store:Rn,render:function(t){return t(m)}}).$mount("#app")},5879:function(t,e,i){"use strict";i("6417")},"5a57":function(t,e,i){},"5c0b":function(t,e,i){"use strict";i("9c0c")},"5de5":function(t,e,i){},6417:function(t,e,i){},8356:function(t,e,i){},"869c":function(t,e,i){},"87b9":function(t,e,i){"use strict";i("2a50")},"8b41":function(t,e,i){"use strict";i("f43a")},"96a3":function(t,e,i){},"9c0c":function(t,e,i){},"9c98":function(t,e,i){"use strict";i("5a57")},"9dc3":function(t,e,i){},"9f0e":function(t,e,i){"use strict";i("40f1")},"9f3b":function(t,e,i){"use strict";i("2342")},"9fca":function(t,e,i){"use strict";i("e83f")},b6af:function(t,e,i){"use strict";i("5108")},c49e:function(t,e,i){"use strict";i("1f38")},c77a:function(t,e,i){"use strict";i("3f68")},c899:function(t,e,i){"use strict";i("3402")},ca97:function(t,e,i){"use strict";i("e5b0")},d045:function(t,e,i){},d189:function(t,e,i){"use strict";i("869c")},d5ca:function(t,e,i){"use strict";i("e8af")},e5b0:function(t,e,i){},e83f:function(t,e,i){},e8af:function(t,e,i){},f43a:function(t,e,i){},f5a9:function(t,e,i){"use strict";i("5de5")},fb74:function(t,e,i){}});