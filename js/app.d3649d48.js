(function(e){function t(t){for(var n,c,d=t[0],a=t[1],l=t[2],u=0,h=[];u<d.length;u++)c=d[u],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&h.push(s[c][0]),s[c]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);r&&r(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],n=!0,d=1;d<i.length;d++){var a=i[d];0!==s[a]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=i[0]))}return e}var n={},s={app:0},o=[];function c(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.m=e,c.c=n,c.d=function(e,t,i){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(i,n,function(t){return e[t]}.bind(null,n));return i},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var d=window["webpackJsonp"]=window["webpackJsonp"]||[],a=d.push.bind(d);d.push=t,d=d.slice();for(var l=0;l<d.length;l++)t(d[l]);var r=a;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},1569:function(e,t,i){},"198b":function(e,t,i){},"2ad8":function(e,t,i){"use strict";i("4e05")},"2c29":function(e,t,i){},"2fdc":function(e,t,i){"use strict";i("c227")},"43fb":function(e,t,i){},"4e05":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("caad"),i("2532");var n=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],c=(i("5c0b"),i("2877")),d={},a=Object(c["a"])(d,s,o,!1,null,null,null),l=a.exports,r=i("8c4f"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editor"},[i("header",[i("Heading")],1),i("main",[i("Sidebar",{attrs:{id:"sidebar"}}),e.isAnySlideSelected?i("keep-alive",[i(e.activeSlideComponent,{tag:"component"})],1):i("div",{staticClass:"help_text"},[e._v("Чтобы начать редактирование, добавьте слайд ")])],1)])},h=[],f=i("5530"),m=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},p=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"header border-bottom navbar navbar-expand-md navbar-light"},[i("div",{staticClass:"logo"},[i("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[e._v("iAudience")])]),i("div",{staticClass:"title"},[e._v(" Название теста ")]),i("div",{staticClass:"controls"},[i("ul",{staticClass:"navbar-nav"},[i("div",[i("a",{staticClass:"nav-link",attrs:{href:"#"}},[e._v("На главную")])]),i("div",{staticClass:"dropdown"},[i("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e._v(" Вася Пупкин ")]),i("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton1"}},[i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Профиль")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Настройки")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Выйти")])])])]),i("div",{staticClass:"dropdown"},[i("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e._v(" Помощь ")]),i("ul",{staticClass:"dropdown-menu dropdown-menu-end",attrs:{"aria-labelledby":"dropdownMenuLink"}},[i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Редактор тестов")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Справочный центр")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Быстрый старт")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[e._v("Связаться с нами")])])])])])])])}],v={name:"Heading",props:{}},b=v,S=(i("d09c"),Object(c["a"])(b,m,p,!1,null,"4cf4bb6b",null)),g=S.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sidebar border-end"},[i("div",{ref:"slides",staticClass:"slides"},e._l(e.$store.state.slides,(function(t){return i("div",{key:t.id,staticClass:"slide_item",class:{selected:e.isSlideSelected(t.id)},on:{click:function(i){return e.setActiveSlide(t.id)}}},[i("SlidePreview",{attrs:{"slide-id":t.id}})],1)})),0),i("div",{staticClass:"controls",class:{"border-top":e.hasScroll}},[i("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"button"},on:{click:e.addSlide}},[e._v("Добавить слайд ")])])])},E=[],y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"preview"},[e._v(" "+e._s(e.slideId)+" ")])},w=[],O={name:"SlidePreview",props:["slideId"]},x=O,C=(i("2fdc"),Object(c["a"])(x,y,w,!1,null,"5ec5f12e",null)),j=C.exports,I=i("2f62"),z="ADD_SLIDE",T="SET_ACTIVE_SLIDE",$="SET_SLIDE_TYPE",k="SET_SLIDE_SIZE",M="ADD_SLIDE_ELEMENT",L="DELETE_SLIDE_ELEMENT",P="MOVE_SLIDE_ELEMENT",H="RESIZE_SLIDE_ELEMENT",D={name:"Sidebar",components:{SlidePreview:j},props:{},data:function(){return{mounted:!1}},computed:{hasScroll:function(){return!!this.mounted&&this.$refs.slides.scrollHeight>this.$refs.slides.clientHeight}},methods:Object(f["a"])(Object(f["a"])({},Object(I["d"])({addSlide:z,setActiveSlide:T})),{},{isSlideSelected:function(e){return e===this.$store.getters.activeSlide.id}}),mounted:function(){this.mounted=!0}},A=D,W=(i("be20"),Object(c["a"])(A,_,E,!1,null,"7836226f",null)),N=W.exports,Y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SlideEditor",{attrs:{id:"slide_editor"},scopedSlots:e._u([{key:"params",fn:function(){return[i("div",{staticClass:"col"},[e._v(" SingleChoice params ")])]},proxy:!0},{key:"controls",fn:function(){return[e._v(" SingleChoice controls ")]},proxy:!0}])})},F=[],Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"slide_editor"},[i("div",{staticClass:"params_area border-bottom"},[i("div",{staticClass:"row px-3"},[i("div",{staticClass:"col-3"},[i("label",{staticClass:"form-label",attrs:{for:"slideTypeSelect"}},[e._v(" Тип слайда ")]),i("select",{staticClass:"form-select",attrs:{id:"slideTypeSelect"},domProps:{value:e.activeSlide.type},on:{change:function(t){return e.setSlideType(t.target.value)}}},e._l(e.$store.state.slideTypes,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name)+" ")])})),0)]),e._t("params")],2)]),i("div",{staticClass:"slide_controls_area"},[i("div",{staticClass:"slide_area"},[i("RatioKeeper",{attrs:{ratio:16/9,"min-height":657}},[i("Slide")],1)],1),i("div",{staticClass:"controls_area border-start"},[i("button",{on:{click:e.addText}},[e._v(" Text ")]),i("button",{attrs:{disabled:""},on:{click:e.addImage}},[e._v(" Image ")]),i("button",{attrs:{disabled:""},on:{click:e.addYouTube}},[e._v(" YouTube ")]),e._t("controls"),i("div",{staticStyle:{flex:"1 1 auto"}}),i("button",{on:{click:e.logState}},[e._v("Log vuex state ")])],2)])])},R=[],G="ADD_TEXT_ELEMENT",K="ADD_IMAGE_ELEMENT",X="ADD_YOUTUBE_ELEMENT",U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"content",staticClass:"content",style:{width:e.contentWidth,height:e.contentHeight}},[e.ready?e._t("default"):e._e()],2)},B=[],J=(i("a9e3"),{name:"RatioKeeper",props:{ratio:Number,minHeight:Number},data:function(){return{ready:!1,height:660}},computed:{contentWidth:function(){return(this.height-32)*this.ratio+40+"px"},contentHeight:function(){return this.height+"px"}},watch:{ratio:function(){this.keepAspectRatio()}},methods:{changeSelf:function(e){this.ready=!1,e(),this.ready=!0},keepAspectRatio:function(){var e=this.$refs.content.parentElement.clientHeight-2;e>this.minHeight?this.height=e:this.height=this.minHeight}},created:function(){},mounted:function(){this.changeSelf(this.keepAspectRatio)},destroyed:function(){}}),V=J,q=(i("a6c7"),Object(c["a"])(V,U,B,!1,null,"ec836842",null)),Q=q.exports,ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"slide",staticClass:"slide"},[e.isGridShowing?i("div",{staticClass:"grid",style:{"background-size":e.backgroundSize}}):e._e(),e._l(e.activeSlideElements,(function(t){return i("SlideElement",e._b({key:t.id},"SlideElement",{element:t,slideWidth:e.slideWidth,slideHeight:e.slideHeight,cellSize:e.cellSize},!1))}))],2)},te=[],ie=(i("99af"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"movable",staticClass:"movable",class:{focused:e.isFocused,selected:e.isSelected,outside:e.isOutside,inactive:!e.isFocused&&!e.isSelected},attrs:{tabindex:e.element.id},on:{dblclick:e.onDoubleClick,focusin:function(t){e.isFocused=!0},focusout:function(t){e.isFocused=!1,e.isSelected=!1},keyup:e.onKeyUp}},[i("div",[i("b",[e._v(e._s(e.element.id))]),i("br"),e._v(e._s(e.position)+" "),i("br"),e._v(e._s(e.size)+" "),i("br"),e._v("isFocused: "+e._s(e.isFocused)+" "),i("br"),e._v("isSelected: "+e._s(e.isSelected)+" "),i("br"),e._v("isMoving: "+e._s(e.isMoving)+" "),i("br"),e._v("isOutside: "+e._s(e.isOutside)+" ")]),e.isFocused?[i("div",{ref:"top",staticClass:"size_change top"}),i("div",{ref:"right",staticClass:"size_change right"}),i("div",{ref:"bottom",staticClass:"size_change bottom"}),i("div",{ref:"left",staticClass:"size_change left"})]:e._e()],2)}),ne=[],se=i("3835"),oe=(i("159b"),i("4fad"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content",domProps:{innerHTML:e._s(e.html)}})}),ce=[],de={name:"TextObject",props:["html"],data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},ae=de,le=(i("2ad8"),Object(c["a"])(ae,oe,ce,!1,null,"e44061b2",null)),re=le.exports,ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content",domProps:{innerHTML:e._s(e.html)}})},he=[],fe={name:"YouTubeObject",props:["html"],data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},me=fe,pe=(i("b331"),Object(c["a"])(me,ue,he,!1,null,"11387f13",null)),ve=pe.exports,be={name:"SlideElement",components:{TextObject:re,YouTubeObject:ve},props:["element","slideWidth","slideHeight","cellSize"],data:function(){return{isFocused:!1,isSelected:!1,isMoving:!1,defaultZ:"20",activeZ:"21",x:0,y:0,width:0,height:0}},computed:{position:function(){return[this.x,this.y]},size:function(){return[this.width,this.height]},isOutside:function(){return this.x<0||this.y<0||this.x+this.width>this.slideWidth||this.y+this.height>this.slideHeight}},watch:{position:function(){this.moveSlideElement({id:this.element.id,x:this.x,y:this.y}),this.$refs.movable.style.left=this.x*this.cellSize+"px",this.$refs.movable.style.top=this.y*this.cellSize+"px"},size:function(){this.resizeSlideElement({id:this.element.id,width:this.width,height:this.height}),this.$refs.movable.style.width=this.width*this.cellSize+"px",this.$refs.movable.style.height=this.height*this.cellSize+"px"},isFocused:function(e){var t=this;e&&setTimeout((function(){t.initializeSizeChanger(t.$refs.top,!1,!0),t.initializeSizeChanger(t.$refs.right,!0,!1),t.initializeSizeChanger(t.$refs.bottom,!1,!1),t.initializeSizeChanger(t.$refs.left,!0,!0)}),100)}},methods:Object(f["a"])(Object(f["a"])({},Object(I["d"])({moveSlideElement:P,resizeSlideElement:H})),{},{getPosition:function(){return{x:this.x,y:this.y}},getSize:function(){return{width:this.width,height:this.height}},moveSelfInside:function(){this.isOutside&&(this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x+this.width>this.slideWidth&&(this.x=this.slideWidth-this.width),this.y+this.height>this.slideHeight&&(this.y=this.slideHeight-this.height)),this.isOutside&&(this.width>this.slideWidth&&(this.width=this.slideWidth),this.height>this.slideHeight&&(this.height=this.slideHeight),this.moveSelfInside())},initializeMovable:function(){var e=this,t=this.$refs.movable;t.ondragstart=function(){return!1},t.onmousedown=function(i){e.isMoving=!0,t.style.zIndex=e.activeZ;var n=i.clientX,s=i.clientY,o=e.getPosition(),c=function(t){var i=Math.round((t.clientX-n)/e.cellSize),c=Math.round((t.clientY-s)/e.cellSize);e.x=o.x+i,e.y=o.y+c};document.addEventListener("mousemove",c),document.onmouseup=function(){e.moveSelfInside(),e.isMoving=!1,t.style.zIndex=e.defaultZ,document.removeEventListener("mousemove",c),document.onmouseup=null}}},initializeSizeChanger:function(e,t,i){var n=this;void 0!==e&&(e.ondragstart=function(){return!1},e.onmousedown=function(s){s.stopPropagation(),n.isMoving=!0,e.style.zIndex=n.activeZ;var o=s.clientX,c=s.clientY,d=n.getSize(),a=n.getPosition(),l=function(e){var s=Math.round((e.clientX-o)/n.cellSize),l=Math.round((e.clientY-c)/n.cellSize);t?i?(n.x=a.x+s,n.width=d.width-s):n.width=d.width+s:i?(n.y=a.y+l,n.height=d.height-l):n.height=d.height+l};document.addEventListener("mousemove",l),document.onmouseup=function(){n.moveSelfInside(),n.isMoving=!1,e.style.zIndex=n.defaultZ,document.removeEventListener("mousemove",l),document.onmouseup=null}})},onKeyUp:function(e){"Delete"===e.key&&this.$store.commit(L,this.element.id)},onDoubleClick:function(){this.isSelected=!this.isSelected}}),created:function(){var e=this;Object.entries(this.element).forEach((function(t){var i=Object(se["a"])(t,2),n=i[0],s=i[1];return e[n]=s}))},mounted:function(){this.initializeMovable()}},Se=be,ge=(i("657d"),Object(c["a"])(Se,ie,ne,!1,null,"20a001d0",null)),_e=ge.exports,Ee={name:"Slide",components:{SlideElement:_e},data:function(){return{backgroundSize:"calc(100% / 16) calc(100% / 9)",multiplier:4,isGridShowing:!0}},computed:Object(f["a"])(Object(f["a"])({},Object(I["e"])({slideWidth:function(e){return e.slideParams.width},slideHeight:function(e){return e.slideParams.height},cellSize:function(e){return e.slideParams.cellSize}})),Object(I["c"])(["activeSlideElements"])),watch:{},methods:{test:function(){console.log("test")},setGridSize:function(){this.$store.commit(k,this.$refs.slide.clientWidth/this.slideWidth),this.backgroundSize="".concat(100/this.slideWidth,"% ").concat(100/this.slideHeight,"%")}},created:function(){},mounted:function(){this.setGridSize()}},ye=Ee,we=(i("92c4"),Object(c["a"])(ye,ee,te,!1,null,"133397b7",null)),Oe=we.exports,xe={name:"SlideEditor",components:{Slide:Oe,RatioKeeper:Q},props:{},computed:Object(f["a"])({},Object(I["c"])(["activeSlide"])),methods:Object(f["a"])(Object(f["a"])(Object(f["a"])({},Object(I["d"])({setSlideType:$})),Object(I["b"])({addImage:K,addYouTube:X})),{},{addText:function(){this.$store.dispatch(G,{x:0,y:0,width:10,height:14})},logState:function(){console.log(this.$store.state)}})},Ce=xe,je=(i("d5ca"),Object(c["a"])(Ce,Z,R,!1,null,null,null)),Ie=je.exports,ze={name:"SingleChoice",components:{SlideEditor:Ie},props:{},computed:{},methods:{}},Te=ze,$e=Object(c["a"])(Te,Y,F,!1,null,"0489223a",null),ke=$e.exports,Me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SlideEditor",{attrs:{id:"slide_editor"},scopedSlots:e._u([{key:"params",fn:function(){return[i("div",{staticClass:"col"},[e._v(" Info params ")])]},proxy:!0},{key:"controls",fn:function(){return[e._v(" Info controls ")]},proxy:!0}])})},Le=[],Pe={name:"Info",components:{SlideEditor:Ie},props:{},computed:{},methods:{}},He=Pe,De=Object(c["a"])(He,Me,Le,!1,null,"a26383e6",null),Ae=De.exports,We={name:"Editor",components:{Heading:g,Sidebar:N,SingleChoice:ke,Info:Ae},computed:Object(f["a"])({isAnySlideSelected:function(){return void 0!==this.activeSlide}},Object(I["c"])(["activeSlide","activeSlideComponent"]))},Ne=We,Ye=(i("eb0e"),Object(c["a"])(Ne,u,h,!1,null,"6ece83f0",null)),Fe=Ye.exports;n["a"].use(r["a"]);var Ze,Re,Ge=[{path:"/",name:"Editor",component:Fe}],Ke=new r["a"]({mode:"history",base:"/",routes:Ge}),Xe=Ke,Ue=i("ade3");i("7db0"),i("d81d"),i("a434");n["a"].use(I["a"]);var Be=new I["a"].Store({state:{newSlideId:1,newSlideElementId:1,slideParams:{width:64,height:36,cellSize:0},activeSlideId:null,slides:[],slideTypes:[{id:1,name:"ТЕСТ: Единственный выбор",component:"SingleChoice"},{id:8,name:"Информация",component:"Info"}]},getters:{activeSlide:function(e){return e.slides.find((function(t){return t.id===e.activeSlideId}))},activeSlideElements:function(e,t){return t.activeSlide.slideElements},activeSlideComponent:function(e,t){return e.slideTypes.find((function(e){return e.id===t.activeSlide.type})).component}},mutations:(Ze={increaseNewSlideId:function(e){e.newSlideId++},increaseNewSlideElementId:function(e){e.newSlideElementId++}},Object(Ue["a"])(Ze,z,(function(e){var t={id:e.newSlideId,type:1,slideElements:[]};e.slides.push(t),e.activeSlideId=t.id})),Object(Ue["a"])(Ze,T,(function(e,t){e.activeSlideId=t})),Object(Ue["a"])(Ze,$,(function(e,t){var i=e.slides.find((function(t){return t.id===e.activeSlideId}));i.type=parseInt(t)})),Object(Ue["a"])(Ze,k,(function(e,t){e.slideParams.cellSize=t})),Object(Ue["a"])(Ze,M,(function(e,t){var i=e.slides.find((function(t){return t.id===e.activeSlideId})).slideElements;i.push(Object(f["a"])({id:e.newSlideElementId},t))})),Object(Ue["a"])(Ze,L,(function(e,t){var i=e.slides.find((function(t){return t.id===e.activeSlideId})).slideElements,n=i.map((function(e){return e.id})).indexOf(t);i.splice(n,1)})),Object(Ue["a"])(Ze,P,(function(e,t){var i=t.id,n=t.x,s=t.y,o=e.slides.find((function(t){return t.id===e.activeSlideId})).slideElements.find((function(e){return e.id===i}));o.x=n,o.y=s})),Object(Ue["a"])(Ze,H,(function(e,t){var i=t.id,n=t.width,s=t.height,o=e.slides.find((function(t){return t.id===e.activeSlideId})).slideElements.find((function(e){return e.id===i}));o.width=n,o.height=s})),Ze),actions:(Re={},Object(Ue["a"])(Re,G,(function(e,t){var i=e.state,n=e.commit;n(M,Object(f["a"])(Object(f["a"])({},t),{},{content:{component:"TextObject",html:"<b>".concat(i.stateId,"</b>")}}))})),Object(Ue["a"])(Re,K,(function(e){e.commit})),Object(Ue["a"])(Re,X,(function(e){e.commit})),Re),modules:{},strict:!1});n["a"].config.productionTip=!1,Be.subscribe((function(e){[z].includes(e.type)&&Be.commit("increaseNewSlideId"),[M].includes(e.type)&&Be.commit("increaseNewSlideElementId")})),new n["a"]({router:Xe,store:Be,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";i("9c0c")},"657d":function(e,t,i){"use strict";i("7c03")},"7c03":function(e,t,i){},9266:function(e,t,i){},"92c4":function(e,t,i){"use strict";i("2c29")},"9c0c":function(e,t,i){},a6c7:function(e,t,i){"use strict";i("1569")},b331:function(e,t,i){"use strict";i("9266")},bdff:function(e,t,i){},be20:function(e,t,i){"use strict";i("bdff")},c227:function(e,t,i){},d09c:function(e,t,i){"use strict";i("43fb")},d5ca:function(e,t,i){"use strict";i("e8af")},e8af:function(e,t,i){},eb0e:function(e,t,i){"use strict";i("198b")}});
//# sourceMappingURL=app.d3649d48.js.map