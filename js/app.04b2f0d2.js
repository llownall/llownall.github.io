(function(t){function e(e){for(var n,d,c=e[0],a=e[1],r=e[2],u=0,h=[];u<c.length;u++)d=c[u],Object.prototype.hasOwnProperty.call(s,d)&&s[d]&&h.push(s[d][0]),s[d]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,r||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,c=1;c<i.length;c++){var a=i[c];0!==s[a]&&(n=!1)}n&&(o.splice(e--,1),t=d(d.s=i[0]))}return t}var n={},s={app:0},o=[];function d(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,d),i.l=!0,i.exports}d.m=t,d.c=n,d.d=function(t,e,i){d.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},d.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},d.t=function(t,e){if(1&e&&(t=d(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(d.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)d.d(i,n,function(e){return t[e]}.bind(null,n));return i},d.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return d.d(e,"a",e),e},d.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},d.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var r=0;r<c.length;r++)e(c[r]);var l=a;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},1569:function(t,e,i){},"2ad8":function(t,e,i){"use strict";i("4e05")},"2fdc":function(t,e,i){"use strict";i("c227")},"43fb":function(t,e,i){},"47fa":function(t,e,i){"use strict";i("82eb")},"4e05":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("caad"),i("2532");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],d=(i("5c0b"),i("2877")),c={},a=Object(d["a"])(c,s,o,!1,null,null,null),r=a.exports,l=i("8c4f"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor"},[i("header",[i("Heading")],1),i("main",[i("Sidebar",{attrs:{id:"sidebar"}}),t.isAnySlideSelected?i("SlideEditor",{attrs:{id:"slide_editor"}}):i("div",{staticClass:"help_text"},[t._v("Чтобы начать редактирование, добавьте слайд")])],1)])},h=[],f=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",{staticClass:"header border-bottom navbar navbar-expand-md navbar-light"},[i("div",{staticClass:"logo"},[i("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t._v("iAudience")])]),i("div",{staticClass:"title"},[t._v(" Название теста ")]),i("div",{staticClass:"controls"},[i("ul",{staticClass:"navbar-nav"},[i("div",[i("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("На главную")])]),i("div",{staticClass:"dropdown"},[i("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" Вася Пупкин ")]),i("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton1"}},[i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Профиль")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Настройки")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Выйти")])])])]),i("div",{staticClass:"dropdown"},[i("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" Помощь ")]),i("ul",{staticClass:"dropdown-menu dropdown-menu-end",attrs:{"aria-labelledby":"dropdownMenuLink"}},[i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Редактор тестов")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Справочный центр")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Быстрый старт")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Связаться с нами")])])])])])])])}],v={name:"Heading",props:{}},p=v,b=(i("d09c"),Object(d["a"])(p,f,m,!1,null,"4cf4bb6b",null)),g=b.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sidebar border-end"},[i("div",{ref:"slides",staticClass:"slides"},t._l(t.$store.state.slides,(function(e){return i("div",{key:e.id,staticClass:"slide_item",class:{selected:t.isSlideSelected(e.id)},on:{click:function(i){return t.setActiveSlide(e.id)}}},[i("SlidePreview",{attrs:{"slide-id":e.id}})],1)})),0),i("div",{staticClass:"controls",class:{"border-top":t.hasScroll}},[i("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"button"},on:{click:t.addSlide}},[t._v("Добавить слайд ")])])])},_=[],E=i("5530"),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"preview"},[t._v(" "+t._s(t.slideId)+" ")])},y=[],O={name:"SlidePreview",props:["slideId"]},x=O,j=(i("2fdc"),Object(d["a"])(x,w,y,!1,null,"5ec5f12e",null)),C=j.exports,z=i("2f62"),I="ADD_SLIDE",$="SET_ACTIVE_SLIDE",M="SET_SLIDE_SIZE",T="ADD_SLIDE_ELEMENT",k="DELETE_SLIDE_ELEMENT",H="MOVE_SLIDE_ELEMENT",L="RESIZE_SLIDE_ELEMENT",D={name:"Sidebar",components:{SlidePreview:C},props:{},data:function(){return{mounted:!1}},computed:{hasScroll:function(){return!!this.mounted&&this.$refs.slides.scrollHeight>this.$refs.slides.clientHeight}},methods:Object(E["a"])(Object(E["a"])({},Object(z["d"])({addSlide:I,setActiveSlide:$})),{},{isSlideSelected:function(t){return t===this.$store.getters.activeSlide.id}}),mounted:function(){this.mounted=!0}},P=D,A=(i("be20"),Object(d["a"])(P,S,_,!1,null,"7836226f",null)),W=A.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slide_editor"},[i("div",{staticClass:"params_area border-bottom"},[i("button",{on:{click:t.logState}},[t._v("Log vuex state ")])]),i("div",{staticClass:"slide_controls_area"},[i("div",{staticClass:"slide_area"},[i("RatioKeeper",{attrs:{ratio:16/9,"min-height":660}},[i("Slide")],1)],1),i("div",{staticClass:"controls_area border-start"},[i("button",{on:{click:t.addText}},[t._v(" Text ")]),i("button",{attrs:{disabled:""},on:{click:t.addImage}},[t._v(" Image ")]),i("button",{attrs:{disabled:""},on:{click:t.addYouTube}},[t._v(" YouTube ")])])])])},Y=[],F="ADD_TEXT_ELEMENT",Z="ADD_IMAGE_ELEMENT",R="ADD_YOUTUBE_ELEMENT",G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"content",staticClass:"content",style:{width:t.contentWidth,height:t.contentHeight}},[t.ready?t._t("default"):t._e()],2)},K=[],X=(i("a9e3"),{name:"RatioKeeper",props:{ratio:Number,minHeight:Number},data:function(){return{ready:!1,height:660}},computed:{contentWidth:function(){return(this.height-32)*this.ratio+40+"px"},contentHeight:function(){return this.height+"px"}},watch:{ratio:function(){this.keepAspectRatio()}},methods:{changeSelf:function(t){this.ready=!1,t(),this.ready=!0},keepAspectRatio:function(){var t=this.$refs.content.parentElement.clientHeight-2;t>this.minHeight?this.height=t:this.height=this.minHeight}},created:function(){},mounted:function(){this.changeSelf(this.keepAspectRatio)},destroyed:function(){}}),U=X,B=(i("a6c7"),Object(d["a"])(U,G,K,!1,null,"ec836842",null)),J=B.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"slide",staticClass:"slide"},[t.isGridShowing?i("div",{staticClass:"grid",style:{"background-size":t.backgroundSize}}):t._e(),t._l(t.activeSlideElements,(function(e){return i("SlideElement",t._b({key:e.id},"SlideElement",{element:e,slideWidth:t.slideWidth,slideHeight:t.slideHeight,cellSize:t.cellSize},!1))}))],2)},q=[],Q=(i("99af"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"movable",staticClass:"movable",class:{focused:t.isFocused,selected:t.isSelected,outside:t.isOutside,inactive:!t.isFocused&&!t.isSelected},attrs:{tabindex:t.element.id},on:{dblclick:t.onDoubleClick,focusin:function(e){t.isFocused=!0},focusout:function(e){t.isFocused=!1,t.isSelected=!1},keyup:t.onKeyUp}},[i("div",[i("b",[t._v(t._s(t.element.id))]),i("br"),t._v(t._s(t.position)+" "),i("br"),t._v(t._s(t.size)+" "),i("br"),t._v("isFocused: "+t._s(t.isFocused)+" "),i("br"),t._v("isSelected: "+t._s(t.isSelected)+" "),i("br"),t._v("isMoving: "+t._s(t.isMoving)+" "),i("br"),t._v("isOutside: "+t._s(t.isOutside)+" ")]),t.isFocused?[i("div",{ref:"top",staticClass:"size_change top"}),i("div",{ref:"right",staticClass:"size_change right"}),i("div",{ref:"bottom",staticClass:"size_change bottom"}),i("div",{ref:"left",staticClass:"size_change left"})]:t._e()],2)}),tt=[],et=i("3835"),it=(i("159b"),i("4fad"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content",domProps:{innerHTML:t._s(t.html)}})}),nt=[],st={name:"TextObject",props:["html"],data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},ot=st,dt=(i("2ad8"),Object(d["a"])(ot,it,nt,!1,null,"e44061b2",null)),ct=dt.exports,at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content",domProps:{innerHTML:t._s(t.html)}})},rt=[],lt={name:"YouTubeObject",props:["html"],data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},ut=lt,ht=(i("b331"),Object(d["a"])(ut,at,rt,!1,null,"11387f13",null)),ft=ht.exports,mt={name:"SlideElement",components:{TextObject:ct,YouTubeObject:ft},props:["element","slideWidth","slideHeight","cellSize"],data:function(){return{isFocused:!1,isSelected:!1,isMoving:!1,defaultZ:"20",activeZ:"21",x:0,y:0,width:0,height:0}},computed:{position:function(){return[this.x,this.y]},size:function(){return[this.width,this.height]},isOutside:function(){return this.x<0||this.y<0||this.x+this.width>this.slideWidth||this.y+this.height>this.slideHeight}},watch:{position:function(){this.moveSlideElement({id:this.element.id,x:this.x,y:this.y}),this.$refs.movable.style.left=this.x*this.cellSize+"px",this.$refs.movable.style.top=this.y*this.cellSize+"px"},size:function(){this.resizeSlideElement({id:this.element.id,width:this.width,height:this.height}),this.$refs.movable.style.width=this.width*this.cellSize+"px",this.$refs.movable.style.height=this.height*this.cellSize+"px"},isFocused:function(t){var e=this;t&&setTimeout((function(){e.initializeSizeChanger(e.$refs.top,!1,!0),e.initializeSizeChanger(e.$refs.right,!0,!1),e.initializeSizeChanger(e.$refs.bottom,!1,!1),e.initializeSizeChanger(e.$refs.left,!0,!0)}),100)}},methods:Object(E["a"])(Object(E["a"])({},Object(z["d"])({moveSlideElement:H,resizeSlideElement:L})),{},{getPosition:function(){return{x:this.x,y:this.y}},getSize:function(){return{width:this.width,height:this.height}},moveSelfInside:function(){this.isOutside&&(this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x+this.width>this.slideWidth&&(this.x=this.slideWidth-this.width),this.y+this.height>this.slideHeight&&(this.y=this.slideHeight-this.height)),this.isOutside&&(this.width>this.slideWidth&&(this.width=this.slideWidth),this.height>this.slideHeight&&(this.height=this.slideHeight),this.moveSelfInside())},initializeMovable:function(){var t=this,e=this.$refs.movable;e.ondragstart=function(){return!1},e.onmousedown=function(i){t.isMoving=!0,e.style.zIndex=t.activeZ;var n=i.clientX,s=i.clientY,o=t.getPosition(),d=function(e){var i=Math.round((e.clientX-n)/t.cellSize),d=Math.round((e.clientY-s)/t.cellSize);t.x=o.x+i,t.y=o.y+d};document.addEventListener("mousemove",d),document.onmouseup=function(){t.moveSelfInside(),t.isMoving=!1,e.style.zIndex=t.defaultZ,document.removeEventListener("mousemove",d),document.onmouseup=null}}},initializeSizeChanger:function(t,e,i){var n=this;void 0!==t&&(t.ondragstart=function(){return!1},t.onmousedown=function(s){s.stopPropagation(),n.isMoving=!0,t.style.zIndex=n.activeZ;var o=s.clientX,d=s.clientY,c=n.getSize(),a=n.getPosition(),r=function(t){var s=Math.round((t.clientX-o)/n.cellSize),r=Math.round((t.clientY-d)/n.cellSize);e?i?(n.x=a.x+s,n.width=c.width-s):n.width=c.width+s:i?(n.y=a.y+r,n.height=c.height-r):n.height=c.height+r};document.addEventListener("mousemove",r),document.onmouseup=function(){n.moveSelfInside(),n.isMoving=!1,t.style.zIndex=n.defaultZ,document.removeEventListener("mousemove",r),document.onmouseup=null}})},onKeyUp:function(t){"Delete"===t.key&&this.$store.commit(k,this.element.id)},onDoubleClick:function(){this.isSelected=!this.isSelected}}),created:function(){var t=this;Object.entries(this.element).forEach((function(e){var i=Object(et["a"])(e,2),n=i[0],s=i[1];return t[n]=s}))},mounted:function(){this.initializeMovable()}},vt=mt,pt=(i("657d"),Object(d["a"])(vt,Q,tt,!1,null,"20a001d0",null)),bt=pt.exports,gt={name:"Slide",components:{SlideElement:bt},props:["slideId"],data:function(){return{backgroundSize:"calc(100% / 16) calc(100% / 9)",multiplier:4,isGridShowing:!0}},computed:Object(E["a"])(Object(E["a"])({},Object(z["e"])({slideWidth:function(t){return t.slideParams.width},slideHeight:function(t){return t.slideParams.height},cellSize:function(t){return t.slideParams.cellSize}})),Object(z["c"])(["activeSlideElements"])),watch:{},methods:{test:function(){console.log("test")},setGridSize:function(){this.$store.commit(M,{width:this.slideWidth*this.multiplier,height:this.slideHeight*this.multiplier,cellSize:this.$refs.slide.clientWidth/(this.slideWidth*this.multiplier)}),this.backgroundSize="".concat(100/this.slideWidth,"% ").concat(100/this.slideHeight,"%")}},created:function(){},mounted:function(){this.setGridSize()}},St=gt,_t=(i("47fa"),Object(d["a"])(St,V,q,!1,null,"37a944f4",null)),Et=_t.exports,wt={name:"SlideEditor",components:{Slide:Et,RatioKeeper:J},props:{},computed:{},methods:Object(E["a"])(Object(E["a"])({},Object(z["b"])({addImage:Z,addYouTube:R})),{},{addText:function(){this.$store.dispatch(F,{x:0,y:0,width:10,height:14})},logState:function(){console.log(this.$store.state)}})},yt=wt,Ot=(i("d5ca"),Object(d["a"])(yt,N,Y,!1,null,null,null)),xt=Ot.exports,jt={name:"Editor",components:{SlideEditor:xt,Heading:g,Sidebar:W},computed:{isAnySlideSelected:function(){return void 0!==this.$store.getters.activeSlide}}},Ct=jt,zt=(i("7276"),Object(d["a"])(Ct,u,h,!1,null,"30046695",null)),It=zt.exports;n["a"].use(l["a"]);var $t,Mt,Tt=[{path:"/",redirect:"/editor"},{path:"/editor",name:"Editor",component:It}],kt=new l["a"]({mode:"history",base:"/",routes:Tt}),Ht=kt,Lt=i("ade3");i("7db0"),i("d81d"),i("a434");n["a"].use(z["a"]);var Dt=new z["a"].Store({state:{newSlideId:1,newSlideElementId:1,slideParams:{width:16,height:9,cellSize:0},activeSlideId:null,slides:[],slideElements:[]},getters:{activeSlide:function(t){return t.slides.find((function(e){return e.id===t.activeSlideId}))},activeSlideElements:function(t,e){return e.activeSlide.slideElements}},mutations:($t={increaseNewSlideId:function(t){t.newSlideId++},increaseNewSlideElementId:function(t){t.newSlideElementId++}},Object(Lt["a"])($t,I,(function(t){var e={id:t.newSlideId,slideElements:[]};t.slides.push(e),t.activeSlideId=e.id})),Object(Lt["a"])($t,$,(function(t,e){t.activeSlideId=e})),Object(Lt["a"])($t,M,(function(t,e){t.slideParams=Object.assign({},e)})),Object(Lt["a"])($t,T,(function(t,e){var i=t.slides.find((function(e){return e.id===t.activeSlideId})).slideElements;i.push(Object(E["a"])({id:t.newSlideElementId},e))})),Object(Lt["a"])($t,k,(function(t,e){var i=t.slides.find((function(e){return e.id===t.activeSlideId})).slideElements,n=i.map((function(t){return t.id})).indexOf(e);i.splice(n,1)})),Object(Lt["a"])($t,H,(function(t,e){var i=e.id,n=e.x,s=e.y,o=t.slides.find((function(e){return e.id===t.activeSlideId})).slideElements.find((function(t){return t.id===i}));o.x=n,o.y=s})),Object(Lt["a"])($t,L,(function(t,e){var i=e.id,n=e.width,s=e.height,o=t.slides.find((function(e){return e.id===t.activeSlideId})).slideElements.find((function(t){return t.id===i}));o.width=n,o.height=s})),$t),actions:(Mt={},Object(Lt["a"])(Mt,F,(function(t,e){var i=t.state,n=t.commit;n(T,Object(E["a"])(Object(E["a"])({},e),{},{content:{component:"TextObject",html:"<b>".concat(i.stateId,"</b>")}}))})),Object(Lt["a"])(Mt,Z,(function(t){t.commit})),Object(Lt["a"])(Mt,R,(function(t){t.commit})),Mt),modules:{},strict:!1});n["a"].config.productionTip=!1,Dt.subscribe((function(t){[I].includes(t.type)&&Dt.commit("increaseNewSlideId"),[T].includes(t.type)&&Dt.commit("increaseNewSlideElementId")})),new n["a"]({router:Ht,store:Dt,render:function(t){return t(r)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},"657d":function(t,e,i){"use strict";i("7c03")},7276:function(t,e,i){"use strict";i("f97c")},"7c03":function(t,e,i){},"82eb":function(t,e,i){},9266:function(t,e,i){},"9c0c":function(t,e,i){},a6c7:function(t,e,i){"use strict";i("1569")},b331:function(t,e,i){"use strict";i("9266")},bdff:function(t,e,i){},be20:function(t,e,i){"use strict";i("bdff")},c227:function(t,e,i){},d09c:function(t,e,i){"use strict";i("43fb")},d5ca:function(t,e,i){"use strict";i("e8af")},e8af:function(t,e,i){},f97c:function(t,e,i){}});
//# sourceMappingURL=app.04b2f0d2.js.map