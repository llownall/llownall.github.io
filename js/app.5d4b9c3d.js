(function(t){function e(e){for(var o,n,r=e[0],l=e[1],c=e[2],d=0,f=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&f.push(s[n][0]),s[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(o=!1)}o&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},s={app:0},i=[];function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var o=a("85ec"),s=a.n(o);s.a},"1a85":function(t,e,a){"use strict";var o=a("a152"),s=a.n(o);s.a},"2aee":function(t,e,a){},"44af":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/jax"}},[t._v("wysiwygMath - MathJax")])],1),a("div",{staticStyle:{padding:"40px"}},[a("keep-alive",[a("router-view")],1)],1)])},i=[],n={created:function(){"/jax"!==this.$router.currentRoute.path&&this.$router.push("/jax")}},r=n,l=(a("034f"),a("2877")),c=Object(l["a"])(r,s,i,!1,null,null,null),u=c.exports,d=a("8c4f"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.showPopup,expression:"showPopup"}],staticClass:"popup",on:{mousedown:t.preventHide}},[a("span",{staticClass:"border-right"},t._l(t.fontStyles,(function(e,o){return a("button",{key:o,class:{selected:e.selected},on:{click:function(a){return t.setStyle(e.style,!1,null,!0)}}},[a("i",{class:e.icon})])})),0),a("span",{staticClass:"border-right"},[a("button",{on:{click:function(e){return t.setStyle("justifyLeft")}}},[a("i",{staticClass:"fas fa-align-left"})]),a("button",{on:{click:function(e){return t.setStyle("justifyCenter")}}},[a("i",{staticClass:"fas fa-align-center"})]),a("button",{on:{click:function(e){return t.setStyle("justifyRight")}}},[a("i",{staticClass:"fas fa-align-right"})]),a("button",{on:{click:function(e){return t.setStyle("justifyFull")}}},[a("i",{staticClass:"fas fa-align-justify"})])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:function(e){return t.setStyle("insertUnorderedList")}}},[a("i",{staticClass:"fas fa-list-ul"})]),a("button",{on:{click:function(e){return t.setStyle("insertOrderedList")}}},[a("i",{staticClass:"fas fa-list-ol"})])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:function(e){return t.setStyle("formatBlock",!1,"h4")}}},[a("i",{staticClass:"fas fa-heading"})])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:t.decreaseFont}},[t._v("smaller")]),a("button",{on:{click:t.increaseFont}},[t._v("bigger")])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:t.createFormula}},[a("i",{staticClass:"fas fa-square-root-alt"}),t._v("math")])]),a("span",{},[a("button",{on:{click:function(e){return t.setStyle("undo")}}},[a("i",{staticClass:"fas fa-undo-alt"})])])])]),a("div",{ref:"textarea",staticClass:"form-control editor",style:"height: calc(1.5em * "+t.rows+" + .75rem + 2px); display: inline-block",attrs:{id:t.id,placeholder:t.placeholder,contenteditable:""},on:{focusin:function(e){t.showPopup=!0},focusout:t.hideSelf,input:t.onDivInput,change:t.onDivInput,click:t.updateCursorPos,keyup:t.updateCursorPos}}),a("div",[t._v(" dataRaw "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data,expression:"data"}],attrs:{cols:"100",rows:"10"},domProps:{value:t.data},on:{input:[function(e){e.target.composing||(t.data=e.target.value)},t.onDataRawInput],change:t.onDataRawInput}})])]),a("formula-modal",{ref:"formulaAddModal",on:{"insert-latex":t.insertLaTeX}}),a("formula-modal",{ref:"formulaEditModal",attrs:{"is-in-edit-mode":""},on:{"insert-latex":t.insertLaTeX2}})],1)},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-end"},[a("h3",[t._v("MathJax")])])}],p=(a("7db0"),a("4160"),a("caad"),a("c975"),a("d81d"),a("b0c0"),a("a9e3"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"formula",staticClass:"wysiwyg-math-formula",attrs:{contenteditable:"false"},domProps:{innerHTML:t._s("\\( "+t.latex+" \\)")},on:{dblclick:t.edit}})}),h=[],v={name:"mathFormula",props:{latex:String},data:function(){return{show:!1}},methods:{edit:function(){window.bus.$emit("formula-click",{element:this.$refs.formula,latex:this.latex})},render:function(){var t=this;this.show=!1,setTimeout((function(){window.MathJax.typeset(),t.show=!0}),100)}},mounted:function(){this.render()}},b=v,g=(a("1a85"),Object(l["a"])(b,p,h,!1,null,null,null)),w=g.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.isInEditMode?"Редактировать формулу":"Вставить формулу"))]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){t.showModal=!1}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"d-flex mb-3"},[a("div",{staticClass:"d-flex"},[a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"py-1 px-2 text-center",staticStyle:{"background-color":"#ffffff",position:"relative",cursor:"pointer","user-select":"none",margin:"1px",border:"rgb(133, 133, 133) solid 1px","border-radius":"4px"},style:t.showLetters?"border: black solid 2px; margin: 0;":"",attrs:{tabindex:"0"},on:{click:function(e){t.showLetters=!t.showLetters},focusout:t.hideSelf}},[t._v(" \\(\\alpha \\beta \\delta\\) ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showLetters,expression:"showLetters"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 2px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(8, 1fr)","flex-wrap":"wrap","text-align":"center"},on:{mousedown:t.preventHide}},t._l(t.letters,(function(e,o){return a("div",{key:o,staticClass:"letter",on:{click:function(a){return t.insertLetter(e)}}},[t._v(" \\( "+t._s(e)+" \\) ")])})),0)]),a("div",{staticClass:"ml-2",staticStyle:{position:"relative"}},[a("div",{staticClass:"py-1 px-2 text-center",staticStyle:{"background-color":"#ffffff",position:"relative",cursor:"pointer","user-select":"none",margin:"1px",border:"rgb(133, 133, 133) solid 1px","border-radius":"4px"},style:t.showOperators?"border: black solid 2px; margin: 0;":"",attrs:{tabindex:"0"},on:{click:function(e){t.showOperators=!t.showOperators},focusout:t.hideSelf}},[t._v(" \\(\\sum\\) ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showOperators,expression:"showOperators"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 2px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(4, 1fr)","flex-wrap":"wrap","text-align":"center"},on:{mousedown:t.preventHide}},t._l(t.operators,(function(e,o){return a("div",{key:o,staticClass:"letter",on:{click:function(a){return t.insertOperator(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)]),a("div",{staticClass:"ml-2",staticStyle:{position:"relative"}},[a("div",{staticClass:"py-1 px-2 text-center",staticStyle:{"background-color":"#ffffff",position:"relative",cursor:"pointer","user-select":"none",margin:"1px",border:"rgb(133, 133, 133) solid 1px","border-radius":"4px"},style:t.showSymbols?"border: black solid 2px; margin: 0;":"",attrs:{tabindex:"0"},on:{click:function(e){t.showSymbols=!t.showSymbols},focusout:t.hideSelf}},[t._v(" \\(\\neq\\) ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showSymbols,expression:"showSymbols"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 2px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(7, 1fr)","flex-wrap":"wrap","text-align":"center"},on:{mousedown:t.preventHide}},t._l(t.symbols,(function(e,o){return a("div",{key:o,staticClass:"letter",on:{click:function(a){return t.insertSymbol(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)])])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formula,expression:"formula"}],ref:"formulaTextarea",staticStyle:{width:"100%"},attrs:{rows:"3",autofocus:""},domProps:{value:t.formula},on:{click:t.updateFormulaCursorPos,keydown:t.updateFormulaCursorPos,input:function(e){e.target.composing||(t.formula=e.target.value)}}}),a("div",{staticStyle:{"font-weight":"bolder",margin:".8rem 0 .4rem"}},[t._v("Результат:")]),a("div",{ref:"formulaPreview",staticStyle:{margin:".5rem 0",height:"40px"}})]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("Отмена")]),t.isInEditMode?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.saveFormula}},[t._v("Сохранить ")]):a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addFormula}},[t._v("Добавить ")])])])])])])])},x=[],S=(a("fb6a"),{name:"wysiwygMath",components:{mathFormula:w},props:{isInEditMode:{type:Boolean,default:!1}},data:function(){return{showModal:!1,updateFormulaTimeout:null,formula:"",data:null,showLetters:!1,showOperators:!1,showSymbols:!1,preventHideFlag:!1,changeOpacity:!1,letters:["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\zeta","\\eta","\\theta","\\iota","\\kappa","\\lambda","\\mu","\\nu","\\pi","\\rho","\\sigma","\\tau","\\upsilon","\\phi","\\chi","\\psi","\\omega"],operators:["\\sqrt{ab}","\\sqrt[n]{ab}","\\log_{a}{b}","\\lg{ab}","a^{b}","a_{b} c_a^b","c_a^b","\\widetilde{ab}","\\widehat{ab}","\\overrightarrow{ab}","\\overline{ab}","\\frac{ab}{cd}","\\frac{\\partial a}{\\partial b}","\\frac{\\text{d}x}{\\text{d}y}","\\lim_{a \\rightarrow b}","\\int_{a}^{b}","\\prod_a^b","\\bigcap_a^b","\\bigcup_a^b","\\sum_a^b","\\left(\\begin{array}{c}a\\\\ b\\end{array}\\right)","\\begin{bmatrix}a & b \\\\c & d \\end{bmatrix}","\\begin{cases}a & x = 0\\\\b & x > 0\\end{cases}"],symbols:["\\times","\\div","\\pm","\\mp","\\cdot","\\star","\\neq","\\leq","\\geq","\\sim","\\approx","\\cong","\\equiv","\\ll","\\gg","\\in","\\subset","\\subseteq","\\ni","\\models","\\vdash","\\perp","\\mid","\\parallel","\\hat{a}","\\check{a}","\\acute{a}","\\tilde{a}","\\bar{a}","\\vec{a}","\\dot{a}","\\ddot{a}","\\leftarrow","\\Leftarrow","\\rightarrow","\\Rightarrow","\\leftrightarrow","\\Leftrightarrow","\\exists","\\forall","\\triangle","\\triangledown"]}},watch:{formula:function(){var t=this;this.updateFormulaTimeout&&clearTimeout(this.updateFormulaTimeout),this.updateFormulaTimeout=setTimeout((function(){t.$refs.formulaPreview.innerHTML="\\(".concat(t.formula,"\\)"),window.MathJax.typeset(),t.changeOpacity&&(t.$refs.formulaPreview.style.opacity=1,t.changeOpacity=!1)}),1500)}},methods:{toggle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.data=t,this.isInEditMode&&(this.$refs.formulaPreview.style.opacity=0,this.changeOpacity=!0,this.formula=t.latex),this.formula?this.$refs.formulaPreview.innerHTML="\\(".concat(this.formula,"\\)"):this.$refs.formulaPreview.innerHTML="",this.showModal=!0},test:function(){console.log("123")},preventHide:function(){this.preventHideFlag=!0},hideSelf:function(){this.preventHideFlag?this.preventHideFlag=!this.preventHideFlag:(this.showLetters=!1,this.showOperators=!1,this.showSymbols=!1)},updateData:function(){this.data=this.$refs.textarea.innerHTML},updateFormulaCursorPos:function(t){this.formulaCursorPos=t.target.selectionStart},insertToFormula:function(t){void 0!==this.formulaCursorPos?this.formula=this.formula.slice(0,this.formulaCursorPos)+" ".concat(t," ")+this.formula.slice(this.formulaCursorPos):this.formula+=" ".concat(t," ")},insertLetter:function(t){this.showLetters=!1,this.insertToFormula(t)},insertOperator:function(t){this.showOperators=!1,this.insertToFormula(t)},insertSymbol:function(t){this.showSymbols=!1,this.insertToFormula(t)},addFormula:function(){this.showModal=!1,this.$emit("insert-latex",this.formula)},editFormula:function(){console.log("editFormula")},saveFormula:function(){this.showModal=!1,this.data.latex=this.formula,this.$emit("insert-latex",this.data)}}}),C=S,k=(a("f8f0"),Object(l["a"])(C,y,x,!1,null,null,null)),_=k.exports,M={name:"wysiwygMath",components:{mathFormula:w,formulaModal:_},props:{id:String,placeholder:String,rows:{type:Number,default:5}},data:function(){return{showPopup:!1,hideTimeout:null,preventHideFlag:!1,formula:"x",data:"",selection:null,range:null,fontStyles:[{tag:"b",icon:"fas fa-bold",style:"bold",selected:!1},{tag:"i",icon:"fas fa-italic",style:"italic",selected:!1},{tag:"u",icon:"fas fa-underline",style:"underline",selected:!1},{tag:"strike",icon:"fas fa-strikethrough",style:"strikethrough",selected:!1}],fontSizes:[{name:"x-small",value:"1"},{name:"small",value:"2"},{name:"medium",value:"3"},{name:"large",value:"4"},{name:"x-large",value:"5"},{name:"xx-large",value:"6"},{name:"xxx-large",value:"7"}],updateFormulaTimeout:null}},watch:{selection:function(){this.analyze()},formula:function(){var t=this;this.updateFormulaTimeout&&clearTimeout(this.updateFormulaTimeout),this.updateFormulaTimeout=setTimeout((function(){t.$refs.formulaPreview.innerHTML="\\(".concat(t.formula,"\\)"),window.MathJax.typeset()}),1500)}},methods:{preventHide:function(){this.preventHideFlag=!0},setStyle:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(document.execCommand(t,e,a),o){var s=this.fontStyles.find((function(e){return e.style===t}));s&&(s.selected=!s.selected)}},hideSelf:function(){this.preventHideFlag?this.preventHideFlag=!this.preventHideFlag:this.showPopup=!1},createFormula:function(){this.$refs.formulaAddModal.toggle()},onDivInput:function(t){this.$emit("input",t.target.innerHTML),this.data=t.target.innerHTML},onDataRawInput:function(){this.$refs.textarea.innerHTML=this.data},test:function(){console.log("123")},insertLaTeX:function(t){var e=o["a"].mixin(w),a=new e({propsData:{latex:t}});a.$mount(),this.range.insertNode(a.$el),this.updateData(),this.selection.removeAllRanges(),this.selection.addRange(this.range),this.selection.collapseToEnd(),this.$refs.textarea.focus()},insertLaTeX2:function(t){var e=o["a"].mixin(w),a=new e({propsData:{latex:t.latex}});a.$mount(),t.element.parentNode.insertBefore(a.$el,t.element),t.element.parentNode.removeChild(t.element),this.$refs.textarea.focus()},updateData:function(){this.data=this.$refs.textarea.innerHTML},updateCursorPos:function(){this.selection=window.getSelection(),this.range=this.selection.getRangeAt(0)},analyze:function(){var t,e=this.selection,a=[];if(e.rangeCount){t=e.getRangeAt(0).commonAncestorContainer;while(1){if(t=t.parentNode,null==t)break;var o=t.nodeName.toLowerCase();if(t===this.$refs.textarea)break;a.push(o)}}this.fontStyles.forEach((function(t){return t.selected=a.includes(t.tag)}))},increaseFont:function(){var t=window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement;if(t!==this.$refs.textarea){if(""!==t.style.fontSize){var e=this.fontSizes.map((function(t){return t.name})).indexOf(t.style.fontSize);e<this.fontSizes.length-1&&(document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[e+1].value),document.execCommand("styleWithCSS",!1,!1))}}else document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[3].value),document.execCommand("styleWithCSS",!1,!1)},decreaseFont:function(){var t=window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement;if(t!==this.$refs.textarea){if(""!==t.style.fontSize){var e=this.fontSizes.map((function(t){return t.name})).indexOf(t.style.fontSize);e>0&&(document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[e-1].value),document.execCommand("styleWithCSS",!1,!1))}}else document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[1].value),document.execCommand("styleWithCSS",!1,!1)}},beforeCreate:function(){},beforeMount:function(){window.MathJax={options:{enableMenu:!1}}},mounted:function(){var t=this;window.bus=new o["a"]({}),window.bus.$on("formula-click",(function(e){t.$refs.formulaEditModal.toggle(e)}))}},F=M,P=(a("dcb6"),Object(l["a"])(F,f,m,!1,null,null,null)),L=P.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.showPopup,expression:"showPopup"}],staticClass:"popup",on:{mousedown:t.preventHide}},[a("span",{staticClass:"border-right"},t._l(t.fontStyles,(function(e,o){return a("button",{key:o,class:{selected:e.selected},on:{click:function(a){return t.setStyle(e.style,!1,null,!0)}}},[a("i",{class:e.icon})])})),0),a("span",{staticClass:"border-right"},[a("button",{on:{click:function(e){return t.setStyle("justifyLeft")}}},[a("i",{staticClass:"fas fa-align-left"})]),a("button",{on:{click:function(e){return t.setStyle("justifyCenter")}}},[a("i",{staticClass:"fas fa-align-center"})]),a("button",{on:{click:function(e){return t.setStyle("justifyRight")}}},[a("i",{staticClass:"fas fa-align-right"})]),a("button",{on:{click:function(e){return t.setStyle("justifyFull")}}},[a("i",{staticClass:"fas fa-align-justify"})])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:function(e){return t.setStyle("insertUnorderedList")}}},[a("i",{staticClass:"fas fa-list-ul"})]),a("button",{on:{click:function(e){return t.setStyle("insertOrderedList")}}},[a("i",{staticClass:"fas fa-list-ol"})])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:function(e){return t.setStyle("formatBlock",!1,"h4")}}},[a("i",{staticClass:"fas fa-heading"})])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:t.decreaseFont}},[t._v("smaller")]),a("button",{on:{click:t.increaseFont}},[t._v("bigger")])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:t.createFormula}},[a("i",{staticClass:"fas fa-square-root-alt"}),t._v("math")])]),a("span",{},[a("button",{on:{click:function(e){return t.setStyle("undo")}}},[a("i",{staticClass:"fas fa-undo-alt"})])])])]),a("div",{ref:"textarea",staticClass:"form-control editor",style:"height: calc(1.5em * "+t.rows+" + .75rem + 2px); display: inline-block",attrs:{id:t.id,placeholder:t.placeholder,contenteditable:""},on:{focusin:function(e){t.showPopup=!0},focusout:t.hideSelf,input:t.onDivInput,change:t.onDivInput,click:t.updateCursorPos,keyup:t.updateCursorPos}}),a("div",[t._v(" cursorPos "),a("div",[t._v(" "+t._s(t.cursorPos)+" ")])]),a("br"),a("div",[t._v(" dataRaw "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data,expression:"data"}],attrs:{cols:"100",rows:"10"},domProps:{value:t.data},on:{input:[function(e){e.target.composing||(t.data=e.target.value)},t.onDataRawInput],change:t.onDataRawInput}})])]),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.isInEditMode?"Редактировать формулу":"Вставить формулу"))]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){t.showModal=!1}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"d-flex mb-3"},[a("div",{staticClass:"d-flex"},[a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"py-1 px-2 text-center",staticStyle:{"background-color":"#ffffff",position:"relative",cursor:"pointer","user-select":"none",margin:"1px",border:"rgb(133, 133, 133) solid 1px","border-radius":"4px"},style:t.showLetters?"border: black solid 2px; margin: 0;":"",on:{click:function(e){t.showLetters=!t.showLetters}}},[t._v(" \\(\\alpha \\beta \\delta\\) ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showLetters,expression:"showLetters"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 2px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(8, 1fr)","flex-wrap":"wrap","text-align":"center"}},t._l(t.letters,(function(e,o){return a("div",{key:o,staticClass:"letter",on:{click:function(a){return t.insertLetter(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)]),a("div",{staticClass:"ml-2",staticStyle:{position:"relative"}},[a("div",{staticClass:"py-1 px-2 text-center",staticStyle:{"background-color":"#ffffff",position:"relative",cursor:"pointer","user-select":"none",margin:"1px",border:"rgb(133, 133, 133) solid 1px","border-radius":"4px"},style:t.showOperators?"border: black solid 2px; margin: 0;":"",on:{click:function(e){t.showOperators=!t.showOperators}}},[t._v(" \\(\\sum\\) ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showOperators,expression:"showOperators"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 2px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(4, 1fr)","flex-wrap":"wrap","text-align":"center"}},t._l(t.operators,(function(e,o){return a("div",{key:o,staticClass:"letter",on:{click:function(a){return t.insertOperator(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)]),a("div",{staticClass:"ml-2",staticStyle:{position:"relative"}},[a("div",{staticClass:"py-1 px-2 text-center",staticStyle:{"background-color":"#ffffff",position:"relative",cursor:"pointer","user-select":"none",margin:"1px",border:"rgb(133, 133, 133) solid 1px","border-radius":"4px"},style:t.showSymbols?"border: black solid 2px; margin: 0;":"",on:{click:function(e){t.showSymbols=!t.showSymbols}}},[t._v(" \\(\\neq\\) ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showSymbols,expression:"showSymbols"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 2px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(7, 1fr)","flex-wrap":"wrap","text-align":"center"}},t._l(t.symbols,(function(e,o){return a("div",{key:o,staticClass:"letter",on:{click:function(a){return t.insertSymbol(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)])])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formula,expression:"formula"}],staticStyle:{width:"100%"},attrs:{rows:"3"},domProps:{value:t.formula},on:{click:t.updateFormulaCursorPos,keydown:t.updateFormulaCursorPos,input:function(e){e.target.composing||(t.formula=e.target.value)}}}),a("div",{staticStyle:{"font-weight":"bolder",margin:".8rem 0 .4rem"}},[t._v("Результат:")]),a("div",{ref:"formulaPreview",staticStyle:{margin:".5rem 0",height:"40px"}})]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("Отмена")]),t.isInEditMode?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.saveFormula}},[t._v("Сохранить ")]):a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addFormula}},[t._v("Добавить в конец ")])])])])])])])],1)},O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-end"},[a("h3",[t._v("MathQuill")])])}],$=(a("d3b7"),a("25f0"),{name:"wysiwygMath",props:{id:String,placeholder:String,rows:{type:Number,default:5}},data:function(){return{showPopup:!1,hideTimeout:null,preventHideFlag:!1,formula:"x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}",data:"",cursorPos:0,formulaCursorPos:0,fontStyles:[{tag:"b",icon:"fas fa-bold",style:"bold",selected:!1},{tag:"i",icon:"fas fa-italic",style:"italic",selected:!1},{tag:"u",icon:"fas fa-underline",style:"underline",selected:!1},{tag:"strike",icon:"fas fa-strikethrough",style:"strikethrough",selected:!1}],fontSizes:[{name:"x-small",value:"1"},{name:"small",value:"2"},{name:"medium",value:"3"},{name:"large",value:"4"},{name:"x-large",value:"5"},{name:"xx-large",value:"6"},{name:"xxx-large",value:"7"}],showModal:!1,isInEditMode:!1,showLetters:!1,showOperators:!1,showSymbols:!1,MQ:null,letters:["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\zeta","\\eta","\\theta","\\iota","\\kappa","\\lambda","\\mu","\\nu","\\pi","\\rho","\\sigma","\\tau","\\upsilon","\\phi","\\chi","\\psi","\\omega"],operators:["\\sqrt{ab}","\\sqrt[n]{ab}","\\log_{a}{b}","\\lg{ab}","a^{b}","a_{b} c_a^b","c_a^b","\\widetilde{ab}","\\widehat{ab}","\\overrightarrow{ab}","\\overline{ab}","\\frac{ab}{cd}","\\frac{\\partial a}{\\partial b}","\\frac{\\text{d}x}{\\text{d}y}","\\lim_{a \\rightarrow b}","\\int_{a}^{b}","\\prod_a^b","\\bigcap_a^b","\\bigcup_a^b","\\sum_a^b","\\left(\\begin{array}{c}a\\\\ b\\end{array}\\right)","\\begin{bmatrix}a & b \\\\c & d \\end{bmatrix}","\\begin{cases}a & x = 0\\\\b & x > 0\\end{cases}"],symbols:["\\times","\\div","\\pm","\\mp","\\cdot","\\star","\\neq","\\leq","\\geq","\\sim","\\approx","\\cong","\\equiv","\\ll","\\gg","\\in","\\subset","\\subseteq","\\ni","\\models","\\vdash","\\perp","\\mid","\\parallel","\\hat{a}","\\check{a}","\\acute{a}","\\tilde{a}","\\bar{a}","\\vec{a}","\\dot{a}","\\ddot{a}","\\leftarrow","\\Leftarrow","\\rightarrow","\\Rightarrow","\\leftrightarrow","\\Leftrightarrow","\\exists","\\forall","\\triangle","\\triangledown"]}},watch:{cursorPos:function(){this.analyze()},formula:function(){var t=this;this.$refs.formulaPreview.style.opacity=0,this.$refs.formulaPreview.innerHTML="\\(".concat(this.formula,"\\)"),setTimeout((function(){window.MathJax.typeset(),t.$refs.formulaPreview.style.opacity=1}),200)},showLetters:function(){this.showLetters&&(this.showOperators=!1,this.showSymbols=!1)},showOperators:function(){this.showOperators&&(this.showLetters=!1,this.showSymbols=!1)},showSymbols:function(){this.showSymbols&&(this.showLetters=!1,this.showOperators=!1)}},methods:{preventHide:function(){this.preventHideFlag=!0},setStyle:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(document.execCommand(t,e,a),o){var s=this.fontStyles.find((function(e){return e.style===t}));s&&(s.selected=!s.selected)}},hideSelf:function(){this.preventHideFlag?this.preventHideFlag=!this.preventHideFlag:this.showPopup=!1},createFormula:function(){var t=this;this.isInEditMode=!1,this.showModal=!0,setTimeout((function(){window.MathJax.typeset(),t.$refs.formulaPreview.style.opacity=1}),200)},onDivInput:function(t){this.$emit("input",t.target.innerHTML),this.data=t.target.innerHTML},onDataRawInput:function(){this.$refs.textarea.innerHTML=this.data},getCursorPos:function(){var t=document.getSelection().getRangeAt(0),e=t.cloneRange();return e.selectNodeContents(this.$refs.textarea),e.setEnd(t.endContainer,t.endOffset),e.toString().length},updateCursorPos:function(){this.cursorPos=this.getCursorPos()},updateFormulaCursorPos:function(t){this.formulaCursorPos=t.target.selectionStart},insertToFormula:function(t){this.formula=this.formula.slice(0,this.formulaCursorPos)+" ".concat(t," ")+this.formula.slice(this.formulaCursorPos)},insertLetter:function(t){this.showLetters=!1,this.insertToFormula(t)},insertOperator:function(t){this.showOperators=!1,this.insertToFormula(t)},insertSymbol:function(t){this.showSymbols=!1,this.insertToFormula(t)},analyze:function(){var t,e=window.getSelection(),a=[];if(e.rangeCount){t=e.getRangeAt(0).commonAncestorContainer;while(1){if(t=t.parentNode,null==t)break;var o=t.nodeName.toLowerCase();if(t===this.$refs.textarea)break;a.push(o)}}this.fontStyles.forEach((function(t){return t.selected=a.includes(t.tag)}))},increaseFont:function(){var t=window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement;if(t!==this.$refs.textarea){if(""!==t.style.fontSize){var e=this.fontSizes.map((function(t){return t.name})).indexOf(t.style.fontSize);e<this.fontSizes.length-1&&(document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[e+1].value),document.execCommand("styleWithCSS",!1,!1))}}else document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[3].value),document.execCommand("styleWithCSS",!1,!1)},decreaseFont:function(){var t=window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement;if(t!==this.$refs.textarea){if(""!==t.style.fontSize){var e=this.fontSizes.map((function(t){return t.name})).indexOf(t.style.fontSize);e>0&&(document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[e-1].value),document.execCommand("styleWithCSS",!1,!1))}}else document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[1].value),document.execCommand("styleWithCSS",!1,!1)},addFormula:function(){var t='<span contenteditable="false" class="formula" data-raw="'.concat(this.formula,'" ')+"> "+this.$refs.formulaPreview.innerHTML+" </span><br>";this.$refs.textarea.innerHTML+=t,this.data+=t,setTimeout(window.MathJax.typeset,200),this.showModal=!1,this.formula=""},editFormula:function(t){console.log("editFormula"),console.log(t.target)},saveFormula:function(){},deleteFormula:function(){}},mounted:function(){console.log(window.MathQuill),this.MQ=window.MathQuill.getInterface(2)}}),z=$,H=(a("57ef"),Object(l["a"])(z,T,O,!1,null,null,null)),j=H.exports;o["a"].use(d["a"]);var E=[{path:"/jax",name:"wysiwygMathJax",component:L},{path:"/quill ",name:"wysiwygMathQuill",component:j}],N=new d["a"]({routes:E}),R=N,I=window.MathJax;o["a"].prototype.$mathjax=I,o["a"].config.productionTip=!1,new o["a"]({router:R,render:function(t){return t(u)}}).$mount("#app")},"57ef":function(t,e,a){"use strict";var o=a("44af"),s=a.n(o);s.a},"85ec":function(t,e,a){},a152:function(t,e,a){},dcb6:function(t,e,a){"use strict";var o=a("2aee"),s=a.n(o);s.a},eb0f:function(t,e,a){},f8f0:function(t,e,a){"use strict";var o=a("eb0f"),s=a.n(o);s.a}});
//# sourceMappingURL=app.5d4b9c3d.js.map