(function(t){function e(e){for(var n,a,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={app:0},o=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"006c":function(t,e,i){},"15be":function(t,e,i){"use strict";i("4157")},"2ad8":function(t,e,i){"use strict";i("4e05")},"2d79":function(t,e,i){"use strict";i("3289")},"2faa":function(t,e,i){"use strict";i("9fe0")},3289:function(t,e,i){},4157:function(t,e,i){},"43fb":function(t,e,i){},"4e05":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("caad"),i("2532");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],a=(i("5c0b"),i("2877")),r={},c=Object(a["a"])(r,s,o,!1,null,null,null),l=c.exports,d=i("8c4f"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor"},[i("header",[i("Heading")],1),i("main",[i("Sidebar",{attrs:{id:"sidebar"}}),i("SlideEditor",{attrs:{id:"slide_editor"}})],1)])},h=[],f=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},p=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",{staticClass:"header border-bottom navbar navbar-expand-md navbar-light"},[i("div",{staticClass:"logo"},[i("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t._v("iAudience")])]),i("div",{staticClass:"title"},[t._v(" Название теста ")]),i("div",{staticClass:"controls"},[i("ul",{staticClass:"navbar-nav"},[i("div",[i("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("На главную")])]),i("div",{staticClass:"dropdown"},[i("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" Вася Пупкин ")]),i("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton1"}},[i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Профиль")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Настройки")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Выйти")])])])]),i("div",{staticClass:"dropdown"},[i("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" Помощь ")]),i("ul",{staticClass:"dropdown-menu dropdown-menu-end",attrs:{"aria-labelledby":"dropdownMenuLink"}},[i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Редактор тестов")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Справочный центр")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Быстрый старт")])]),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Связаться с нами")])])])])])])])}],m={name:"Heading",props:{}},v=m,b=(i("d09c"),Object(a["a"])(v,f,p,!1,null,"4cf4bb6b",null)),g=b.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sidebar border-end"},[i("div",{ref:"slides",staticClass:"slides"},[i("div",{staticClass:"content"},[i("SlidePreview")],1),i("div",{staticClass:"content"},[i("SlidePreview")],1),i("div",{staticClass:"content"},[i("SlidePreview")],1),i("div",{staticClass:"content"},[i("SlidePreview")],1),i("div",{staticClass:"content"},[i("SlidePreview")],1)]),i("div",{staticClass:"controls",class:{"border-top":t.hasScroll}},[i("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"button",disabled:""}},[t._v("Добавить вопрос ")])])])},w=[],S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"preview"})},E=[],y={name:"SlidePreview",props:{}},z=y,C=(i("15be"),Object(a["a"])(z,S,E,!1,null,"938a4878",null)),x=C.exports,O={name:"Sidebar",components:{SlidePreview:x},props:{},data:function(){return{mounted:!1}},computed:{hasScroll:function(){return!!this.mounted&&this.$refs.slides.scrollHeight>this.$refs.slides.clientHeight}},mounted:function(){this.mounted=!0}},j=O,$=(i("bf87"),Object(a["a"])(j,_,w,!1,null,"2f05f456",null)),T=$.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slide_editor"},[i("div",{staticClass:"params_area border-bottom"}),i("div",{staticClass:"slide_controls_area"},[i("div",{staticClass:"slide_area"},[i("RatioKeeper",{attrs:{ratio:16/9}},[i("Slide")],1)],1),i("div",{staticClass:"controls_area border-start"},[i("button",{on:{click:t.addText}},[t._v(" Text ")]),i("button",{attrs:{disabled:""},on:{click:t.addImage}},[t._v(" Image ")]),i("button",{attrs:{disabled:""},on:{click:t.addYouTube}},[t._v(" YouTube ")]),i("div",{staticClass:"text-center"},[t._v("stateId = "+t._s(t.$store.state.stateId))])])])])},k=[],P=i("5530"),I=i("2f62"),L="ADD_TEXT_ELEMENT",H="ADD_IMAGE_ELEMENT",D="ADD_YOUTUBE_ELEMENT",W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"content_wrapper",staticClass:"content_wrapper"},[i("div",{staticClass:"content",style:{width:t.width+"px",height:t.height+"px",display:t.display}},["block"===t.display?t._t("default"):t._e()],2)])},A=[],Y=(i("a9e3"),{name:"RatioKeeper",props:{ratio:Number},data:function(){return{width:0,height:0,display:"none"}},watch:{ratio:function(){this.keepAspectRatio()}},methods:{keepAspectRatio:function(){var t=this.$refs.content_wrapper.clientWidth,e=this.$refs.content_wrapper.clientHeight;t/e>this.ratio?(this.width=e*this.ratio,this.height=e):(this.width=t,this.height=t/this.ratio)}},created:function(){window.addEventListener("resize",this.keepAspectRatio)},mounted:function(){this.keepAspectRatio(),this.display="block"},destroyed:function(){window.removeEventListener("resize",this.keepAspectRatio)}}),F=Y,R=(i("a0f6"),Object(a["a"])(F,W,A,!1,null,"2d66d956",null)),Z=R.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"slide",staticClass:"slide"},[t.isGridShowing?i("div",{staticClass:"grid",style:{"background-size":t.backgroundSize}}):t._e(),t._l(t.slideElements,(function(e){return i("SlideElement",t._b({key:e.id,on:{"update-pos":t.updateElementPosition,"update-size":t.updateElementSize}},"SlideElement",{element:e,slideWidth:t.slideWidth,slideHeight:t.slideHeight,cellSize:t.cellSize},!1))}))],2)},G=[],K=(i("99af"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"movable",staticClass:"movable",class:{focused:t.isFocused,selected:t.isSelected,outside:t.isOutside,inactive:!t.isFocused&&!t.isSelected},attrs:{tabindex:t.element.id},on:{dblclick:t.onDoubleClick,focusin:function(e){t.isFocused=!0},focusout:function(e){t.isFocused=!1,t.isSelected=!1},keyup:t.onKeyUp}},[i("div",[i("b",[t._v(t._s(t.element.id))]),i("br"),t._v(t._s(t.position)+" "),i("br"),t._v(t._s(t.size)+" "),i("br"),t._v("isFocused: "+t._s(t.isFocused)+" "),i("br"),t._v("isSelected: "+t._s(t.isSelected)+" "),i("br"),t._v("isMoving: "+t._s(t.isMoving)+" "),i("br"),t._v("isOutside: "+t._s(t.isOutside)+" ")]),t.isFocused?[i("div",{ref:"top",staticClass:"size_change top"}),i("div",{ref:"right",staticClass:"size_change right"}),i("div",{ref:"bottom",staticClass:"size_change bottom"}),i("div",{ref:"left",staticClass:"size_change left"})]:t._e()],2)}),X=[],U=i("3835"),B=(i("159b"),i("4fad"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content",domProps:{innerHTML:t._s(t.html)}})}),J=[],q={name:"TextObject",props:["html"],data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},Q=q,V=(i("2ad8"),Object(a["a"])(Q,B,J,!1,null,"e44061b2",null)),tt=V.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content",domProps:{innerHTML:t._s(t.html)}})},it=[],nt={name:"YouTubeObject",props:["html"],data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},st=nt,ot=(i("b331"),Object(a["a"])(st,et,it,!1,null,"11387f13",null)),at=ot.exports,rt="SET_SLIDE_SIZE",ct="ADD_SLIDE_ELEMENT",lt="DELETE_SLIDE_ELEMENT",dt={name:"SlideElement",components:{TextObject:tt,YouTubeObject:at},props:["element","slideWidth","slideHeight","cellSize"],data:function(){return{isFocused:!1,isSelected:!1,isMoving:!1,defaultZ:"20",activeZ:"21",x:0,y:0,width:0,height:0}},computed:{position:function(){return[this.x,this.y]},size:function(){return[this.width,this.height]},isOutside:function(){return this.x<0||this.y<0||this.x+this.width>this.slideWidth||this.y+this.height>this.slideHeight}},watch:{position:function(){this.updatePosition()},size:function(){this.updateSize()},isFocused:function(t){var e=this;t&&(setTimeout((function(){return e.initializeSizeChanger(e.$refs.top,!1,!0)}),100),setTimeout((function(){return e.initializeSizeChanger(e.$refs.right,!0,!1)}),100),setTimeout((function(){return e.initializeSizeChanger(e.$refs.bottom,!1,!1)}),100),setTimeout((function(){return e.initializeSizeChanger(e.$refs.left,!0,!0)}),100))}},methods:{getPosition:function(){return{x:this.x,y:this.y}},getSize:function(){return{width:this.width,height:this.height}},initializeMovable:function(){var t=this,e=this.$refs.movable;e.ondragstart=function(){return!1},e.onmousedown=function(i){t.isMoving=!0,e.style.zIndex=t.activeZ;var n=i.clientX,s=i.clientY,o=t.getPosition(),a=function(e){var i=Math.round((e.clientX-n)/t.cellSize),a=Math.round((e.clientY-s)/t.cellSize);t.x=o.x+i,t.y=o.y+a};document.addEventListener("mousemove",a),document.onmouseup=function(){t.isOutside&&(t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x+t.width>t.slideWidth&&(t.x=t.slideWidth-t.width),t.y+t.height>t.slideHeight&&(t.y=t.slideHeight-t.height)),t.isMoving=!1,e.style.zIndex=t.defaultZ,document.removeEventListener("mousemove",a),document.onmouseup=null}}},initializeSizeChanger:function(t,e,i){var n=this;t.ondragstart=function(){return!1},t.onmousedown=function(s){s.stopPropagation(),n.isMoving=!0,t.style.zIndex=n.activeZ;var o=s.clientX,a=s.clientY,r=n.getSize(),c=n.getPosition(),l=function(t){var s=Math.round((t.clientX-o)/n.cellSize),l=Math.round((t.clientY-a)/n.cellSize);e?i?(n.x=c.x+s,n.width=r.width-s):n.width=r.width+s:i?(n.y=c.y+l,n.height=r.height-l):n.height=r.height+l};document.addEventListener("mousemove",l),document.onmouseup=function(){n.isMoving=!1,t.style.zIndex=n.defaultZ,document.removeEventListener("mousemove",l),document.onmouseup=null}}},updatePosition:function(){this.$emit("update-pos",{el:this.$refs.movable,position:this.position})},updateSize:function(){this.$emit("update-size",{el:this.$refs.movable,size:this.size})},onKeyUp:function(t){console.log(),"Delete"===t.key&&this.$store.commit(lt,this.element.id)},onDoubleClick:function(){this.isSelected=!this.isSelected}},created:function(){var t=this;Object.entries(this.element).forEach((function(e){var i=Object(U["a"])(e,2),n=i[0],s=i[1];return t[n]=s}))},mounted:function(){this.initializeMovable(),this.updatePosition(),this.updateSize()}},ut=dt,ht=(i("2d79"),Object(a["a"])(ut,K,X,!1,null,"7d2f692c",null)),ft=ht.exports,pt={name:"Slide",components:{SlideElement:ft},props:{},data:function(){return{backgroundSize:"calc(100% / 16) calc(100% / 9)",multiplier:4,isGridShowing:!0}},computed:Object(P["a"])({},Object(I["c"])({slideElements:"slideElements",slideWidth:function(t){return t.slide.width},slideHeight:function(t){return t.slide.height},cellSize:function(t){return t.slide.cellSize}})),watch:{},methods:{test:function(){console.log("test")},setGridSize:function(){this.$store.commit(rt,{width:this.slideWidth*this.multiplier,height:this.slideHeight*this.multiplier,cellSize:this.$refs.slide.clientWidth/(this.slideWidth*this.multiplier)}),this.backgroundSize="".concat(100/this.slideWidth,"% ").concat(100/this.slideHeight,"%")},updateElementPosition:function(t){var e=t.el,i=t.position;e.style.left=i[0]*this.cellSize+"px",e.style.top=i[1]*this.cellSize+"px"},updateElementSize:function(t){var e=t.el,i=t.size;e.style.width=i[0]*this.cellSize+"px",e.style.height=i[1]*this.cellSize+"px"}},created:function(){},mounted:function(){this.setGridSize()}},mt=pt,vt=(i("2faa"),Object(a["a"])(mt,N,G,!1,null,"8e76988a",null)),bt=vt.exports,gt={name:"SlideEditor",components:{Slide:bt,RatioKeeper:Z},props:{},methods:Object(P["a"])(Object(P["a"])({},Object(I["b"])({addImage:H,addYouTube:D})),{},{addText:function(){this.$store.dispatch(L,{x:0,y:0,width:10,height:14})}})},_t=gt,wt=(i("d5ca"),Object(a["a"])(_t,M,k,!1,null,null,null)),St=wt.exports,Et={name:"Editor",components:{SlideEditor:St,Heading:g,Sidebar:T}},yt=Et,zt=(i("8478"),Object(a["a"])(yt,u,h,!1,null,"34c13e26",null)),Ct=zt.exports;n["a"].use(d["a"]);var xt,Ot,jt=[{path:"/",redirect:"/editor"},{path:"/editor",name:"Editor",component:Ct}],$t=new d["a"]({mode:"history",base:"/",routes:jt}),Tt=$t,Mt=i("ade3");i("4de4");n["a"].use(I["a"]);var kt=new I["a"].Store({state:{stateId:1,slide:{width:16,height:9,cellSize:0},slideElements:[]},getters:{},mutations:(xt={increaseStateId:function(t){t.stateId++}},Object(Mt["a"])(xt,rt,(function(t,e){t.slide=Object.assign({},e)})),Object(Mt["a"])(xt,ct,(function(t,e){t.slideElements.push(Object(P["a"])({id:t.stateId},e))})),Object(Mt["a"])(xt,lt,(function(t,e){t.slideElements=t.slideElements.filter((function(t){return t.id!==e}))})),xt),actions:(Ot={},Object(Mt["a"])(Ot,L,(function(t,e){var i=t.state,n=t.commit;n(ct,Object(P["a"])(Object(P["a"])({},e),{},{content:{component:"TextObject",html:"<b>".concat(i.stateId,"</b>")}}))})),Object(Mt["a"])(Ot,H,(function(t){t.commit})),Object(Mt["a"])(Ot,D,(function(t){t.commit})),Ot),modules:{},strict:!1});n["a"].config.productionTip=!1,kt.subscribe((function(t){[ct].includes(t.type)&&kt.commit("increaseStateId")})),new n["a"]({router:Tt,store:kt,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},8478:function(t,e,i){"use strict";i("cac7")},9266:function(t,e,i){},"9c0c":function(t,e,i){},"9fe0":function(t,e,i){},a0f6:function(t,e,i){"use strict";i("006c")},b331:function(t,e,i){"use strict";i("9266")},b8ca:function(t,e,i){},bf87:function(t,e,i){"use strict";i("b8ca")},cac7:function(t,e,i){},d09c:function(t,e,i){"use strict";i("43fb")},d5ca:function(t,e,i){"use strict";i("e8af")},e8af:function(t,e,i){}});
//# sourceMappingURL=app.74b6c9b4.js.map