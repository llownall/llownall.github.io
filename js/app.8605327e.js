(function(t){function e(e){for(var o,n,i=e[0],l=e[1],c=e[2],d=0,f=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&f.push(s[n][0]),s[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(o=!1)}o&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},s={app:0},r=[];function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0f32":function(t,e,a){},"3bac":function(t,e,a){"use strict";var o=a("0f32"),s=a.n(o);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"5rem 2rem"},attrs:{id:"app"}},[a("wysiwyg-math",{attrs:{id:"questionText",placeholder:"Нажмите здесь, чтобы ввести вопрос"}})],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.showPopup,expression:"showPopup"}],staticClass:"popup",on:{mousedown:t.preventHide}},[a("span",{staticClass:"border-right"},t._l(t.fontStyles,(function(e,o){return a("button",{key:o,class:{selected:e.selected},on:{click:function(a){return t.setStyle(e.style,!1,null,!0)}}},[a("i",{class:e.icon})])})),0),a("span",{staticClass:"border-right"},[a("button",{on:{click:function(e){return t.setStyle("justifyLeft")}}},[a("i",{staticClass:"fas fa-align-left"})]),a("button",{on:{click:function(e){return t.setStyle("justifyCenter")}}},[a("i",{staticClass:"fas fa-align-center"})]),a("button",{on:{click:function(e){return t.setStyle("justifyRight")}}},[a("i",{staticClass:"fas fa-align-right"})]),a("button",{on:{click:function(e){return t.setStyle("justifyFull")}}},[a("i",{staticClass:"fas fa-align-justify"})])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:function(e){return t.setStyle("insertUnorderedList")}}},[a("i",{staticClass:"fas fa-list-ul"})]),a("button",{on:{click:function(e){return t.setStyle("insertOrderedList")}}},[a("i",{staticClass:"fas fa-list-ol"})])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:function(e){return t.setStyle("formatBlock",!1,"h4")}}},[a("i",{staticClass:"fas fa-heading"})])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:t.decreaseFont}},[t._v("smaller")]),a("button",{on:{click:t.increaseFont}},[t._v("bigger")])]),a("span",{staticClass:"border-right"},[a("button",{on:{click:function(e){return t.alert("not implemented")}}},[a("i",{staticClass:"fas fa-image"})]),a("button",{on:{click:t.createFormula}},[a("i",{staticClass:"fas fa-square-root-alt"}),t._v(" (math)")])]),a("span",{},[a("button",{on:{click:function(e){return t.setStyle("undo")}}},[a("i",{staticClass:"fas fa-undo-alt"})])])])]),a("div",{ref:"textarea",staticClass:"form-control editor",style:"height: calc(1.5em * "+t.rows+" + .75rem + 2px); display: inline-block",attrs:{id:t.id,placeholder:t.placeholder,contenteditable:""},on:{focusin:function(e){t.showPopup=!0},focusout:t.hideSelf,input:t.onInput,change:t.onInput,click:t.updateCursorPos,keyup:t.updateCursorPos}}),a("div",[t._v(" cursorPos "),a("div",[t._v(" "+t._s(t.cursorPos)+" ")])]),a("br"),a("div",[t._v(" dataRaw "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data,expression:"data"}],attrs:{cols:"100",rows:"10"},domProps:{value:t.data},on:{input:function(e){e.target.composing||(t.data=e.target.value)}}})])]),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.isInEditMode?"Редактировать формулу":"Вставить формулу"))]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){t.showModal=!1}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"d-flex mb-3"},[a("div",{staticClass:"d-flex"},[a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"py-1 px-2 text-center",staticStyle:{"background-color":"#ffffff",position:"relative",cursor:"pointer","user-select":"none",margin:"1px",border:"rgb(133, 133, 133) solid 1px","border-radius":"4px"},style:t.showLetters?"border: black solid 2px; margin: 0;":"",on:{click:function(e){t.showLetters=!t.showLetters}}},[t._v(" \\(\\alpha \\beta \\delta\\) ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showLetters,expression:"showLetters"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 2px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(8, 1fr)","flex-wrap":"wrap","text-align":"center"}},t._l(t.letters,(function(e,o){return a("div",{key:o,staticClass:"letter",on:{click:function(a){return t.insertLetter(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)]),a("div",{staticClass:"ml-2",staticStyle:{position:"relative"}},[a("div",{staticClass:"py-1 px-2 text-center",staticStyle:{"background-color":"#ffffff",position:"relative",cursor:"pointer","user-select":"none",margin:"1px",border:"rgb(133, 133, 133) solid 1px","border-radius":"4px"},style:t.showOperators?"border: black solid 2px; margin: 0;":"",on:{click:function(e){t.showOperators=!t.showOperators}}},[t._v(" \\(\\sum\\) ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showOperators,expression:"showOperators"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 2px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(4, 1fr)","flex-wrap":"wrap","text-align":"center"}},t._l(t.operators,(function(e,o){return a("div",{key:o,staticClass:"letter",on:{click:function(a){return t.insertOperator(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)]),a("div",{staticClass:"ml-2",staticStyle:{position:"relative"}},[a("div",{staticClass:"py-1 px-2 text-center",staticStyle:{"background-color":"#ffffff",position:"relative",cursor:"pointer","user-select":"none",margin:"1px",border:"rgb(133, 133, 133) solid 1px","border-radius":"4px"},style:t.showSymbols?"border: black solid 2px; margin: 0;":"",on:{click:function(e){t.showSymbols=!t.showSymbols}}},[t._v(" \\(\\neq\\) ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showSymbols,expression:"showSymbols"}],staticStyle:{"z-index":"100","background-color":"#ffffff",position:"absolute",top:"100%",left:"0","margin-top":"8px",border:"black 2px solid","border-radius":"4px",padding:"4px",display:"grid","grid-template-columns":"repeat(7, 1fr)","flex-wrap":"wrap","text-align":"center"}},t._l(t.symbols,(function(e,o){return a("div",{key:o,staticClass:"letter",on:{click:function(a){return t.insertSymbol(e)}}},[t._v(" \\("+t._s(e)+"\\) ")])})),0)])])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formula,expression:"formula"}],staticStyle:{width:"100%"},attrs:{rows:"3"},domProps:{value:t.formula},on:{click:t.updateFormulaCursorPos,keydown:t.updateFormulaCursorPos,input:function(e){e.target.composing||(t.formula=e.target.value)}}}),a("div",{staticStyle:{"font-weight":"bolder",margin:".8rem 0 .4rem"}},[t._v("Результат:")]),a("div",{ref:"formulaPreview",staticStyle:{margin:".5rem 0",height:"40px"}})]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){t.showModal=!1}}},[t._v("Отмена")]),t.isInEditMode?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.saveFormula}},[t._v("Сохранить ")]):a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addFormula}},[t._v("Добавить в конец ")])])])])])])])],1)},i=[],l=(a("7db0"),a("4160"),a("caad"),a("c975"),a("d81d"),a("fb6a"),a("b0c0"),a("a9e3"),a("d3b7"),a("25f0"),a("159b"),{name:"wysiwygMath",props:{id:String,placeholder:String,rows:{type:Number,default:5}},data:function(){return{showPopup:!1,hideTimeout:null,preventHideFlag:!1,formula:"",data:"",cursorPos:0,formulaCursorPos:0,fontStyles:[{tag:"b",icon:"fas fa-bold",style:"bold",selected:!1},{tag:"i",icon:"fas fa-italic",style:"italic",selected:!1},{tag:"u",icon:"fas fa-underline",style:"underline",selected:!1},{tag:"strike",icon:"fas fa-strikethrough",style:"strikethrough",selected:!1}],fontSizes:[{name:"x-small",value:"1"},{name:"small",value:"2"},{name:"medium",value:"3"},{name:"large",value:"4"},{name:"x-large",value:"5"},{name:"xx-large",value:"6"},{name:"xxx-large",value:"7"}],showModal:!1,isInEditMode:!1,showLetters:!1,showOperators:!1,showSymbols:!1,letters:["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\zeta","\\eta","\\theta","\\iota","\\kappa","\\lambda","\\mu","\\nu","\\pi","\\rho","\\sigma","\\tau","\\upsilon","\\phi","\\chi","\\psi","\\omega"],operators:["\\sqrt{ab}","\\sqrt[n]{ab}","\\log_{a}{b}","\\lg{ab}","a^{b}","a_{b} c_a^b","c_a^b","\\widetilde{ab}","\\widehat{ab}","\\overrightarrow{ab}","\\overline{ab}","\\frac{ab}{cd}","\\frac{\\partial a}{\\partial b}","\\frac{\\text{d}x}{\\text{d}y}","\\lim_{a \\rightarrow b}","\\int_{a}^{b}","\\prod_a^b","\\bigcap_a^b","\\bigcup_a^b","\\sum_a^b","\\left(\\begin{array}{c}a\\\\ b\\end{array}\\right)","\\begin{bmatrix}a & b \\\\c & d \\end{bmatrix}","\\begin{cases}a & x = 0\\\\b & x > 0\\end{cases}"],symbols:["\\times","\\div","\\pm","\\mp","\\cdot","\\star","\\neq","\\leq","\\geq","\\sim","\\approx","\\cong","\\equiv","\\ll","\\gg","\\in","\\subset","\\subseteq","\\ni","\\models","\\vdash","\\perp","\\mid","\\parallel","\\hat{a}","\\check{a}","\\acute{a}","\\tilde{a}","\\bar{a}","\\vec{a}","\\dot{a}","\\ddot{a}","\\leftarrow","\\Leftarrow","\\rightarrow","\\Rightarrow","\\leftrightarrow","\\Leftrightarrow","\\exists","\\forall","\\triangle","\\triangledown"]}},watch:{cursorPos:function(){this.analyze()},formula:function(){var t=this;this.$refs.formulaPreview.style.opacity=0,this.$refs.formulaPreview.innerHTML="\\(".concat(this.formula,"\\)"),setTimeout((function(){window.MathJax.typeset(),t.$refs.formulaPreview.style.opacity=1}),200)},showLetters:function(){this.showLetters&&(this.showOperators=!1,this.showSymbols=!1)},showOperators:function(){this.showOperators&&(this.showLetters=!1,this.showSymbols=!1)},showSymbols:function(){this.showSymbols&&(this.showLetters=!1,this.showOperators=!1)}},methods:{preventHide:function(){this.preventHideFlag=!0},setStyle:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(document.execCommand(t,e,a),o){var s=this.fontStyles.find((function(e){return e.style===t}));s&&(s.selected=!s.selected)}},hideSelf:function(){this.preventHideFlag?this.preventHideFlag=!this.preventHideFlag:this.showPopup=!1},createFormula:function(){var t=this;this.isInEditMode=!1,this.showModal=!0,setTimeout((function(){window.MathJax.typeset(),t.$refs.formulaPreview.style.opacity=1}),200)},onInput:function(t){this.$emit("input",t.target.innerHTML),this.data=t.target.innerHTML},getCursorPos:function(){var t=document.getSelection().getRangeAt(0),e=t.cloneRange();return e.selectNodeContents(this.$refs.textarea),e.setEnd(t.endContainer,t.endOffset),e.toString().length},updateCursorPos:function(){this.cursorPos=this.getCursorPos()},updateFormulaCursorPos:function(t){this.formulaCursorPos=t.target.selectionStart},insertToFormula:function(t){this.formula=this.formula.slice(0,this.formulaCursorPos)+" ".concat(t," ")+this.formula.slice(this.formulaCursorPos)},insertLetter:function(t){this.showLetters=!1,this.insertToFormula(t)},insertOperator:function(t){this.showOperators=!1,this.insertToFormula(t)},insertSymbol:function(t){this.showSymbols=!1,this.insertToFormula(t)},analyze:function(){var t,e=window.getSelection(),a=[];if(e.rangeCount){t=e.getRangeAt(0).commonAncestorContainer;while(1){if(t=t.parentNode,null==t)break;var o=t.nodeName.toLowerCase();if(t===this.$refs.textarea)break;a.push(o)}}this.fontStyles.forEach((function(t){return t.selected=a.includes(t.tag)}))},increaseFont:function(){var t=window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement;if(t!==this.$refs.textarea){if(""!==t.style.fontSize){var e=this.fontSizes.map((function(t){return t.name})).indexOf(t.style.fontSize);e<this.fontSizes.length-1&&(document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[e+1].value),document.execCommand("styleWithCSS",!1,!1))}}else document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[3].value),document.execCommand("styleWithCSS",!1,!1)},decreaseFont:function(){var t=window.getSelection().getRangeAt(0).commonAncestorContainer.parentElement;if(t!==this.$refs.textarea){if(""!==t.style.fontSize){var e=this.fontSizes.map((function(t){return t.name})).indexOf(t.style.fontSize);e>0&&(document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[e-1].value),document.execCommand("styleWithCSS",!1,!1))}}else document.execCommand("styleWithCSS",!1,!0),document.execCommand("fontSize",!1,this.fontSizes[1].value),document.execCommand("styleWithCSS",!1,!1)},addFormula:function(){var t='<span contenteditable="false" class="math"> '+this.$refs.formulaPreview.innerHTML+" </span><br>",e=this.$refs.textarea.innerHTML;this.$refs.textarea.innerHTML=e+t,this.data+=t,setTimeout(window.MathJax.typeset,200),this.showModal=!1,this.formula=""},saveFormula:function(){},deleteFormula:function(){}},beforeCreate:function(){var t=document.createElement("script");t.setAttribute("src","https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"),document.head.appendChild(t)},beforeMount:function(){window.MathJax={options:{enableMenu:!1}}}}),c=l,u=(a("3bac"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,null,null),f=d.exports,p={name:"App",components:{wysiwygMath:f}},m=p,h=Object(u["a"])(m,s,r,!1,null,null,null),b=h.exports,v=window.MathJax;o["a"].prototype.$mathjax=v,o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(b)}}).$mount("#app")}});
//# sourceMappingURL=app.8605327e.js.map